<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sector3X: moodycamel::ConcurrentQueue&lt; T, Traits &gt;::ImplicitProducer 構造体</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Sector3X
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="検索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 構築: Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">読み取り中…</div>
<div class="SRStatus" id="Searching">検索中…</div>
<div class="SRStatus" id="NoMatches">一致する文字列を見つけられません</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">クラス</a> &#124;
<a href="#pub-methods">公開メンバ関数</a> &#124;
<a href="#pub-attribs">公開変数類</a> &#124;
<a href="#pri-methods">非公開メンバ関数</a> &#124;
<a href="#pri-attribs">非公開変数類</a> &#124;
<a href="#pri-static-attribs">静的非公開変数類</a> &#124;
<a href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer-members.html">全メンバ一覧</a>  </div>
  <div class="headertitle"><div class="title">moodycamel::ConcurrentQueue&lt; T, Traits &gt;::ImplicitProducer 構造体</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
moodycamel::ConcurrentQueue&lt; T, Traits &gt;::ImplicitProducer の継承関係図</div>
<div class="dyncontent">
<div class="center"><!-- SVG 0 --></div>
<center><span class="legend">[<a target="top" href="graph_legend.html">凡例</a>]</span></center></div>
<div class="dynheader">
moodycamel::ConcurrentQueue&lt; T, Traits &gt;::ImplicitProducer 連携図</div>
<div class="dyncontent">
<div class="center"><!-- SVG 1 --></div>
<center><span class="legend">[<a target="top" href="graph_legend.html">凡例</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
クラス</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_entry.html">BlockIndexEntry</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_header.html">BlockIndexHeader</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
公開メンバ関数</h2></td></tr>
<tr class="memitem:a7ca12a5caa59262ca81157573a88f171" id="r_a7ca12a5caa59262ca81157573a88f171"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7ca12a5caa59262ca81157573a88f171">ImplicitProducer</a> (<a class="el" href="classmoodycamel_1_1_concurrent_queue.html">ConcurrentQueue</a> *parent_)</td></tr>
<tr class="separator:a7ca12a5caa59262ca81157573a88f171"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f1931c111a16e7e63446e3cb0277d35" id="r_a5f1931c111a16e7e63446e3cb0277d35"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5f1931c111a16e7e63446e3cb0277d35">~ImplicitProducer</a> ()</td></tr>
<tr class="separator:a5f1931c111a16e7e63446e3cb0277d35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa48e727740b4926065542f0abd35e565" id="r_aa48e727740b4926065542f0abd35e565"><td class="memTemplParams" colspan="2">template&lt;<a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ad59a292a76c2276b4d1c2b1bcd5904a9">AllocationMode</a> allocMode, typename U&gt; </td></tr>
<tr class="memitem:aa48e727740b4926065542f0abd35e565"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#aa48e727740b4926065542f0abd35e565">enqueue</a> (U &amp;&amp;element)</td></tr>
<tr class="separator:aa48e727740b4926065542f0abd35e565"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6936059a98a709b0cfc4b637e9ad21b3" id="r_a6936059a98a709b0cfc4b637e9ad21b3"><td class="memTemplParams" colspan="2">template&lt;typename U&gt; </td></tr>
<tr class="memitem:a6936059a98a709b0cfc4b637e9ad21b3"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#a6936059a98a709b0cfc4b637e9ad21b3">dequeue</a> (U &amp;element)</td></tr>
<tr class="separator:a6936059a98a709b0cfc4b637e9ad21b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b32bec6e776a10946ed78f0b8281f23" id="r_a6b32bec6e776a10946ed78f0b8281f23"><td class="memTemplParams" colspan="2">template&lt;<a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ad59a292a76c2276b4d1c2b1bcd5904a9">AllocationMode</a> allocMode, typename It&gt; </td></tr>
<tr class="memitem:a6b32bec6e776a10946ed78f0b8281f23"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#a6b32bec6e776a10946ed78f0b8281f23">enqueue_bulk</a> (It itemFirst, <a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ac0b73313ed107d313b55c8a77be19b28">size_t</a> count)</td></tr>
<tr class="separator:a6b32bec6e776a10946ed78f0b8281f23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f3002c7030b0f43a460eb71ef05d25a" id="r_a7f3002c7030b0f43a460eb71ef05d25a"><td class="memTemplParams" colspan="2">template&lt;typename It&gt; </td></tr>
<tr class="memitem:a7f3002c7030b0f43a460eb71ef05d25a"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ac0b73313ed107d313b55c8a77be19b28">size_t</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#a7f3002c7030b0f43a460eb71ef05d25a">dequeue_bulk</a> (It &amp;itemFirst, <a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ac0b73313ed107d313b55c8a77be19b28">size_t</a> max)</td></tr>
<tr class="separator:a7f3002c7030b0f43a460eb71ef05d25a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_structmoodycamel_1_1_concurrent_queue_1_1_producer_base"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_methods_structmoodycamel_1_1_concurrent_queue_1_1_producer_base')"><img src="closed.png" alt="-"/>&#160;基底クラス <a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html">moodycamel::ConcurrentQueue&lt; T, Traits &gt;::ProducerBase</a> に属する継承公開メンバ関数</td></tr>
<tr class="memitem:a64199e72e3ed615f15c5a1e14a88086c inherit pub_methods_structmoodycamel_1_1_concurrent_queue_1_1_producer_base" id="r_a64199e72e3ed615f15c5a1e14a88086c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a64199e72e3ed615f15c5a1e14a88086c">ProducerBase</a> (<a class="el" href="classmoodycamel_1_1_concurrent_queue.html">ConcurrentQueue</a> *parent_, bool isExplicit_)</td></tr>
<tr class="separator:a64199e72e3ed615f15c5a1e14a88086c inherit pub_methods_structmoodycamel_1_1_concurrent_queue_1_1_producer_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a148ee8fe496cb3d732f9f8e4608007fb inherit pub_methods_structmoodycamel_1_1_concurrent_queue_1_1_producer_base" id="r_a148ee8fe496cb3d732f9f8e4608007fb"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a148ee8fe496cb3d732f9f8e4608007fb">~ProducerBase</a> ()</td></tr>
<tr class="separator:a148ee8fe496cb3d732f9f8e4608007fb inherit pub_methods_structmoodycamel_1_1_concurrent_queue_1_1_producer_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d625716b2032a18080d07f30274ab6d inherit pub_methods_structmoodycamel_1_1_concurrent_queue_1_1_producer_base" id="r_a4d625716b2032a18080d07f30274ab6d"><td class="memTemplParams" colspan="2">template&lt;typename U&gt; </td></tr>
<tr class="memitem:a4d625716b2032a18080d07f30274ab6d inherit pub_methods_structmoodycamel_1_1_concurrent_queue_1_1_producer_base"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a4d625716b2032a18080d07f30274ab6d">dequeue</a> (U &amp;element)</td></tr>
<tr class="separator:a4d625716b2032a18080d07f30274ab6d inherit pub_methods_structmoodycamel_1_1_concurrent_queue_1_1_producer_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b33050aaa345207173c47a82b0c200b inherit pub_methods_structmoodycamel_1_1_concurrent_queue_1_1_producer_base" id="r_a5b33050aaa345207173c47a82b0c200b"><td class="memTemplParams" colspan="2">template&lt;typename It&gt; </td></tr>
<tr class="memitem:a5b33050aaa345207173c47a82b0c200b inherit pub_methods_structmoodycamel_1_1_concurrent_queue_1_1_producer_base"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ac0b73313ed107d313b55c8a77be19b28">size_t</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a5b33050aaa345207173c47a82b0c200b">dequeue_bulk</a> (It &amp;itemFirst, <a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ac0b73313ed107d313b55c8a77be19b28">size_t</a> max)</td></tr>
<tr class="separator:a5b33050aaa345207173c47a82b0c200b inherit pub_methods_structmoodycamel_1_1_concurrent_queue_1_1_producer_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a069974f5645dc42dba776c5e4aa852cc inherit pub_methods_structmoodycamel_1_1_concurrent_queue_1_1_producer_base" id="r_a069974f5645dc42dba776c5e4aa852cc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html">ProducerBase</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a069974f5645dc42dba776c5e4aa852cc">next_prod</a> () const</td></tr>
<tr class="separator:a069974f5645dc42dba776c5e4aa852cc inherit pub_methods_structmoodycamel_1_1_concurrent_queue_1_1_producer_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a831413985e89bc69664158b325199968 inherit pub_methods_structmoodycamel_1_1_concurrent_queue_1_1_producer_base" id="r_a831413985e89bc69664158b325199968"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ac0b73313ed107d313b55c8a77be19b28">size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a831413985e89bc69664158b325199968">size_approx</a> () const</td></tr>
<tr class="separator:a831413985e89bc69664158b325199968 inherit pub_methods_structmoodycamel_1_1_concurrent_queue_1_1_producer_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fb46a566294d742ba1b4baa584a71f9 inherit pub_methods_structmoodycamel_1_1_concurrent_queue_1_1_producer_base" id="r_a2fb46a566294d742ba1b4baa584a71f9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ad68d536c896de4e839dd95225e7deea3">index_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a2fb46a566294d742ba1b4baa584a71f9">getTail</a> () const</td></tr>
<tr class="separator:a2fb46a566294d742ba1b4baa584a71f9 inherit pub_methods_structmoodycamel_1_1_concurrent_queue_1_1_producer_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_structmoodycamel_1_1details_1_1_concurrent_queue_producer_typeless_base"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_methods_structmoodycamel_1_1details_1_1_concurrent_queue_producer_typeless_base')"><img src="closed.png" alt="-"/>&#160;基底クラス <a class="el" href="structmoodycamel_1_1details_1_1_concurrent_queue_producer_typeless_base.html">moodycamel::details::ConcurrentQueueProducerTypelessBase</a> に属する継承公開メンバ関数</td></tr>
<tr class="memitem:affdd092f53b3f68461afc5ae8814a44e inherit pub_methods_structmoodycamel_1_1details_1_1_concurrent_queue_producer_typeless_base" id="r_affdd092f53b3f68461afc5ae8814a44e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmoodycamel_1_1details_1_1_concurrent_queue_producer_typeless_base.html#affdd092f53b3f68461afc5ae8814a44e">ConcurrentQueueProducerTypelessBase</a> ()</td></tr>
<tr class="separator:affdd092f53b3f68461afc5ae8814a44e inherit pub_methods_structmoodycamel_1_1details_1_1_concurrent_queue_producer_typeless_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
公開変数類</h2></td></tr>
<tr class="memitem:af8a4586c41851ef67092ada99fc9b0ef" id="r_af8a4586c41851ef67092ada99fc9b0ef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmoodycamel_1_1details_1_1_thread_exit_listener.html">details::ThreadExitListener</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af8a4586c41851ef67092ada99fc9b0ef">threadExitListener</a></td></tr>
<tr class="separator:af8a4586c41851ef67092ada99fc9b0ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_attribs_structmoodycamel_1_1_concurrent_queue_1_1_producer_base"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_attribs_structmoodycamel_1_1_concurrent_queue_1_1_producer_base')"><img src="closed.png" alt="-"/>&#160;基底クラス <a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html">moodycamel::ConcurrentQueue&lt; T, Traits &gt;::ProducerBase</a> に属する継承公開変数類</td></tr>
<tr class="memitem:a93bf04a6bf40382a92b63c3b3a859787 inherit pub_attribs_structmoodycamel_1_1_concurrent_queue_1_1_producer_base" id="r_a93bf04a6bf40382a92b63c3b3a859787"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a93bf04a6bf40382a92b63c3b3a859787">isExplicit</a></td></tr>
<tr class="separator:a93bf04a6bf40382a92b63c3b3a859787 inherit pub_attribs_structmoodycamel_1_1_concurrent_queue_1_1_producer_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43b6b37af1bbb9ad927cfee34fd5ea4c inherit pub_attribs_structmoodycamel_1_1_concurrent_queue_1_1_producer_base" id="r_a43b6b37af1bbb9ad927cfee34fd5ea4c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmoodycamel_1_1_concurrent_queue.html">ConcurrentQueue</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a43b6b37af1bbb9ad927cfee34fd5ea4c">parent</a></td></tr>
<tr class="separator:a43b6b37af1bbb9ad927cfee34fd5ea4c inherit pub_attribs_structmoodycamel_1_1_concurrent_queue_1_1_producer_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_attribs_structmoodycamel_1_1details_1_1_concurrent_queue_producer_typeless_base"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_attribs_structmoodycamel_1_1details_1_1_concurrent_queue_producer_typeless_base')"><img src="closed.png" alt="-"/>&#160;基底クラス <a class="el" href="structmoodycamel_1_1details_1_1_concurrent_queue_producer_typeless_base.html">moodycamel::details::ConcurrentQueueProducerTypelessBase</a> に属する継承公開変数類</td></tr>
<tr class="memitem:a0e2a2381effda8611ccd71629f716432 inherit pub_attribs_structmoodycamel_1_1details_1_1_concurrent_queue_producer_typeless_base" id="r_a0e2a2381effda8611ccd71629f716432"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmoodycamel_1_1details_1_1_concurrent_queue_producer_typeless_base.html">ConcurrentQueueProducerTypelessBase</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmoodycamel_1_1details_1_1_concurrent_queue_producer_typeless_base.html#a0e2a2381effda8611ccd71629f716432">next</a></td></tr>
<tr class="separator:a0e2a2381effda8611ccd71629f716432 inherit pub_attribs_structmoodycamel_1_1details_1_1_concurrent_queue_producer_typeless_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a084765e7e00d6ae481b59da7276cebba inherit pub_attribs_structmoodycamel_1_1details_1_1_concurrent_queue_producer_typeless_base" id="r_a084765e7e00d6ae481b59da7276cebba"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmoodycamel_1_1details_1_1_concurrent_queue_producer_typeless_base.html#a084765e7e00d6ae481b59da7276cebba">inactive</a></td></tr>
<tr class="separator:a084765e7e00d6ae481b59da7276cebba inherit pub_attribs_structmoodycamel_1_1details_1_1_concurrent_queue_producer_typeless_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5498fe2c251bf814dda20cd4c9b158dd inherit pub_attribs_structmoodycamel_1_1details_1_1_concurrent_queue_producer_typeless_base" id="r_a5498fe2c251bf814dda20cd4c9b158dd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmoodycamel_1_1_producer_token.html">ProducerToken</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmoodycamel_1_1details_1_1_concurrent_queue_producer_typeless_base.html#a5498fe2c251bf814dda20cd4c9b158dd">token</a></td></tr>
<tr class="separator:a5498fe2c251bf814dda20cd4c9b158dd inherit pub_attribs_structmoodycamel_1_1details_1_1_concurrent_queue_producer_typeless_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
非公開メンバ関数</h2></td></tr>
<tr class="memitem:aa6d3e5e6b4316468ae9516dddddcb1bc" id="r_aa6d3e5e6b4316468ae9516dddddcb1bc"><td class="memTemplParams" colspan="2">template&lt;<a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ad59a292a76c2276b4d1c2b1bcd5904a9">AllocationMode</a> allocMode&gt; </td></tr>
<tr class="memitem:aa6d3e5e6b4316468ae9516dddddcb1bc"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#aa6d3e5e6b4316468ae9516dddddcb1bc">insert_block_index_entry</a> (<a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_entry.html">BlockIndexEntry</a> *&amp;idxEntry, <a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ad68d536c896de4e839dd95225e7deea3">index_t</a> blockStartIndex)</td></tr>
<tr class="separator:aa6d3e5e6b4316468ae9516dddddcb1bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5e3152c1585fc55870f369953def5d3" id="r_ac5e3152c1585fc55870f369953def5d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac5e3152c1585fc55870f369953def5d3">rewind_block_index_tail</a> ()</td></tr>
<tr class="separator:ac5e3152c1585fc55870f369953def5d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac93f8bee615dc7b467bb079757ad64ba" id="r_ac93f8bee615dc7b467bb079757ad64ba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_entry.html">BlockIndexEntry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac93f8bee615dc7b467bb079757ad64ba">get_block_index_entry_for_index</a> (<a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ad68d536c896de4e839dd95225e7deea3">index_t</a> index) const</td></tr>
<tr class="separator:ac93f8bee615dc7b467bb079757ad64ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1ccbb67d675d29732e99ced35d27012" id="r_ad1ccbb67d675d29732e99ced35d27012"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ac0b73313ed107d313b55c8a77be19b28">size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad1ccbb67d675d29732e99ced35d27012">get_block_index_index_for_index</a> (<a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ad68d536c896de4e839dd95225e7deea3">index_t</a> index, <a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_header.html">BlockIndexHeader</a> *&amp;localBlockIndex) const</td></tr>
<tr class="separator:ad1ccbb67d675d29732e99ced35d27012"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e4830a175aa8a3f160a5a85afe72af4" id="r_a6e4830a175aa8a3f160a5a85afe72af4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6e4830a175aa8a3f160a5a85afe72af4">new_block_index</a> ()</td></tr>
<tr class="separator:a6e4830a175aa8a3f160a5a85afe72af4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
非公開変数類</h2></td></tr>
<tr class="memitem:a3fdd755001cff817e7a4ca707db16dc8" id="r_a3fdd755001cff817e7a4ca707db16dc8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ac0b73313ed107d313b55c8a77be19b28">size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3fdd755001cff817e7a4ca707db16dc8">nextBlockIndexCapacity</a></td></tr>
<tr class="separator:a3fdd755001cff817e7a4ca707db16dc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff4b09564ee422ffb81feb29254d288a" id="r_aff4b09564ee422ffb81feb29254d288a"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; <a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_header.html">BlockIndexHeader</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aff4b09564ee422ffb81feb29254d288a">blockIndex</a></td></tr>
<tr class="separator:aff4b09564ee422ffb81feb29254d288a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-attribs" name="pri-static-attribs"></a>
静的非公開変数類</h2></td></tr>
<tr class="memitem:ad6584eb1791fa6e8f21895c5cff378c9" id="r_ad6584eb1791fa6e8f21895c5cff378c9"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ad68d536c896de4e839dd95225e7deea3">index_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad6584eb1791fa6e8f21895c5cff378c9">INVALID_BLOCK_BASE</a> = 1</td></tr>
<tr class="separator:ad6584eb1791fa6e8f21895c5cff378c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
その他の継承メンバ</h2></td></tr>
<tr class="inherit_header pro_attribs_structmoodycamel_1_1_concurrent_queue_1_1_producer_base"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pro_attribs_structmoodycamel_1_1_concurrent_queue_1_1_producer_base')"><img src="closed.png" alt="-"/>&#160;基底クラス <a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html">moodycamel::ConcurrentQueue&lt; T, Traits &gt;::ProducerBase</a> に属する継承限定公開変数類</td></tr>
<tr class="memitem:ab85f3afa84aa593e919e15d6e5f48a25 inherit pro_attribs_structmoodycamel_1_1_concurrent_queue_1_1_producer_base" id="r_ab85f3afa84aa593e919e15d6e5f48a25"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; <a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ad68d536c896de4e839dd95225e7deea3">index_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#ab85f3afa84aa593e919e15d6e5f48a25">tailIndex</a></td></tr>
<tr class="separator:ab85f3afa84aa593e919e15d6e5f48a25 inherit pro_attribs_structmoodycamel_1_1_concurrent_queue_1_1_producer_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1eeef14eaabdf2f095adf69bec68555 inherit pro_attribs_structmoodycamel_1_1_concurrent_queue_1_1_producer_base" id="r_af1eeef14eaabdf2f095adf69bec68555"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; <a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ad68d536c896de4e839dd95225e7deea3">index_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#af1eeef14eaabdf2f095adf69bec68555">headIndex</a></td></tr>
<tr class="separator:af1eeef14eaabdf2f095adf69bec68555 inherit pro_attribs_structmoodycamel_1_1_concurrent_queue_1_1_producer_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a359b5849773f2ee67538539910dd58cb inherit pro_attribs_structmoodycamel_1_1_concurrent_queue_1_1_producer_base" id="r_a359b5849773f2ee67538539910dd58cb"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; <a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ad68d536c896de4e839dd95225e7deea3">index_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a359b5849773f2ee67538539910dd58cb">dequeueOptimisticCount</a></td></tr>
<tr class="separator:a359b5849773f2ee67538539910dd58cb inherit pro_attribs_structmoodycamel_1_1_concurrent_queue_1_1_producer_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79a1dcb32a5c213a60695af0ae3db993 inherit pro_attribs_structmoodycamel_1_1_concurrent_queue_1_1_producer_base" id="r_a79a1dcb32a5c213a60695af0ae3db993"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; <a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ad68d536c896de4e839dd95225e7deea3">index_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a79a1dcb32a5c213a60695af0ae3db993">dequeueOvercommit</a></td></tr>
<tr class="separator:a79a1dcb32a5c213a60695af0ae3db993 inherit pro_attribs_structmoodycamel_1_1_concurrent_queue_1_1_producer_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5df8ac9c8c8a3d7b03dcb69b7cd142ac inherit pro_attribs_structmoodycamel_1_1_concurrent_queue_1_1_producer_base" id="r_a5df8ac9c8c8a3d7b03dcb69b7cd142ac"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_block.html">Block</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a5df8ac9c8c8a3d7b03dcb69b7cd142ac">tailBlock</a></td></tr>
<tr class="separator:a5df8ac9c8c8a3d7b03dcb69b7cd142ac inherit pro_attribs_structmoodycamel_1_1_concurrent_queue_1_1_producer_base"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">詳解</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;typename T, typename Traits = ConcurrentQueueDefaultTraits&gt;<br />
struct moodycamel::ConcurrentQueue&lt; T, Traits &gt;::ImplicitProducer</div>
<p class="definition"> <a class="el" href="concurrentqueue_8h_source.html">concurrentqueue.h</a> の <a class="el" href="concurrentqueue_8h_source.html#l02421">2421</a> 行目に定義があります。</p>
</div><h2 class="groupheader">構築子と解体子</h2>
<a id="a7ca12a5caa59262ca81157573a88f171" name="a7ca12a5caa59262ca81157573a88f171"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ca12a5caa59262ca81157573a88f171">&#9670;&#160;</a></span>ImplicitProducer()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, typename Traits = ConcurrentQueueDefaultTraits&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmoodycamel_1_1_concurrent_queue.html">moodycamel::ConcurrentQueue</a>&lt; T, Traits &gt;::ImplicitProducer::ImplicitProducer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmoodycamel_1_1_concurrent_queue.html">ConcurrentQueue</a> *</td>          <td class="paramname"><span class="paramname"><em>parent_</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition"> <a class="el" href="concurrentqueue_8h_source.html">concurrentqueue.h</a> の <a class="el" href="concurrentqueue_8h_source.html#l02423">2423</a> 行目に定義があります。</p>
<div class="fragment"><div class="line"><span class="lineno"> 2423</span>                                                   :</div>
<div class="line"><span class="lineno"> 2424</span>            <a class="code hl_function" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a64199e72e3ed615f15c5a1e14a88086c">ProducerBase</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">parent_</a>, <span class="keyword">false</span>),</div>
<div class="line"><span class="lineno"> 2425</span>            <a class="code hl_variable" href="#a3fdd755001cff817e7a4ca707db16dc8">nextBlockIndexCapacity</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">IMPLICIT_INITIAL_INDEX_SIZE</a>),</div>
<div class="line"><span class="lineno"> 2426</span>            <a class="code hl_variable" href="#aff4b09564ee422ffb81feb29254d288a">blockIndex</a>(<span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno"> 2427</span>        {</div>
<div class="line"><span class="lineno"> 2428</span>            <a class="code hl_function" href="#a6e4830a175aa8a3f160a5a85afe72af4">new_block_index</a>();</div>
<div class="line"><span class="lineno"> 2429</span>        }</div>
<div class="ttc" id="aclassmoodycamel_1_1_concurrent_queue_html"><div class="ttname"><a href="classmoodycamel_1_1_concurrent_queue.html">moodycamel::ConcurrentQueue</a></div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l00767">concurrentqueue.h:768</a></div></div>
<div class="ttc" id="astructmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_html_a3fdd755001cff817e7a4ca707db16dc8"><div class="ttname"><a href="#a3fdd755001cff817e7a4ca707db16dc8">moodycamel::ConcurrentQueue::ImplicitProducer::nextBlockIndexCapacity</a></div><div class="ttdeci">size_t nextBlockIndexCapacity</div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l03011">concurrentqueue.h:3011</a></div></div>
<div class="ttc" id="astructmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_html_a6e4830a175aa8a3f160a5a85afe72af4"><div class="ttname"><a href="#a6e4830a175aa8a3f160a5a85afe72af4">moodycamel::ConcurrentQueue::ImplicitProducer::new_block_index</a></div><div class="ttdeci">bool new_block_index()</div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l02966">concurrentqueue.h:2966</a></div></div>
<div class="ttc" id="astructmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_html_aff4b09564ee422ffb81feb29254d288a"><div class="ttname"><a href="#aff4b09564ee422ffb81feb29254d288a">moodycamel::ConcurrentQueue::ImplicitProducer::blockIndex</a></div><div class="ttdeci">std::atomic&lt; BlockIndexHeader * &gt; blockIndex</div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l03012">concurrentqueue.h:3012</a></div></div>
<div class="ttc" id="astructmoodycamel_1_1_concurrent_queue_1_1_producer_base_html_a64199e72e3ed615f15c5a1e14a88086c"><div class="ttname"><a href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a64199e72e3ed615f15c5a1e14a88086c">moodycamel::ConcurrentQueue::ProducerBase::ProducerBase</a></div><div class="ttdeci">ProducerBase(ConcurrentQueue *parent_, bool isExplicit_)</div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l01700">concurrentqueue.h:1700</a></div></div>
</div><!-- fragment --><div class="dynheader">
呼び出し関係図:</div>
<div class="dyncontent">
<div class="center"><!-- SVG 2 --></div>
</div>

</div>
</div>
<a id="a5f1931c111a16e7e63446e3cb0277d35" name="a5f1931c111a16e7e63446e3cb0277d35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f1931c111a16e7e63446e3cb0277d35">&#9670;&#160;</a></span>~ImplicitProducer()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, typename Traits = ConcurrentQueueDefaultTraits&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmoodycamel_1_1_concurrent_queue.html">moodycamel::ConcurrentQueue</a>&lt; T, Traits &gt;::ImplicitProducer::~ImplicitProducer </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition"> <a class="el" href="concurrentqueue_8h_source.html">concurrentqueue.h</a> の <a class="el" href="concurrentqueue_8h_source.html#l02431">2431</a> 行目に定義があります。</p>
<div class="fragment"><div class="line"><span class="lineno"> 2432</span>        {</div>
<div class="line"><span class="lineno"> 2433</span>            <span class="comment">// Note that since we&#39;re in the destructor we can assume that all enqueue/dequeue operations</span></div>
<div class="line"><span class="lineno"> 2434</span>            <span class="comment">// completed already; this means that all undequeued elements are placed contiguously across</span></div>
<div class="line"><span class="lineno"> 2435</span>            <span class="comment">// contiguous blocks, and that only the first and last remaining blocks can be only partially</span></div>
<div class="line"><span class="lineno"> 2436</span>            <span class="comment">// empty (all other remaining blocks must be completely full).</span></div>
<div class="line"><span class="lineno"> 2437</span>            </div>
<div class="line"><span class="lineno"> 2438</span><span class="preprocessor">#ifdef MOODYCAMEL_CPP11_THREAD_LOCAL_SUPPORTED</span></div>
<div class="line"><span class="lineno"> 2439</span>            <span class="comment">// Unregister ourselves for thread termination notification</span></div>
<div class="line"><span class="lineno"> 2440</span>            <span class="keywordflow">if</span> (!this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1details_1_1_concurrent_queue_producer_typeless_base.html#a084765e7e00d6ae481b59da7276cebba">inactive</a>.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>)) {</div>
<div class="line"><span class="lineno"> 2441</span>                <a class="code hl_function" href="classmoodycamel_1_1details_1_1_thread_exit_notifier.html#a75d86f4f47adcf30091647566496ece9">details::ThreadExitNotifier::unsubscribe</a>(&amp;<a class="code hl_variable" href="#af8a4586c41851ef67092ada99fc9b0ef">threadExitListener</a>);</div>
<div class="line"><span class="lineno"> 2442</span>            }</div>
<div class="line"><span class="lineno"> 2443</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2444</span>            </div>
<div class="line"><span class="lineno"> 2445</span>            <span class="comment">// Destroy all remaining elements!</span></div>
<div class="line"><span class="lineno"> 2446</span>            <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">tail</a> = this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#ab85f3afa84aa593e919e15d6e5f48a25">tailIndex</a>.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2447</span>            <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a> = this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#af1eeef14eaabdf2f095adf69bec68555">headIndex</a>.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2448</span>            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">Block</a>* <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 2449</span>            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">assert</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a> == <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">tail</a> || <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">details::circular_less_than</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">tail</a>));</div>
<div class="line"><span class="lineno"> 2450</span>            <span class="keywordtype">bool</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">forceFreeLastBlock</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a> != <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">tail</a>;     <span class="comment">// If we enter the loop, then the last (tail) block will not be freed</span></div>
<div class="line"><span class="lineno"> 2451</span>            <span class="keywordflow">while</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a> != <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">tail</a>) {</div>
<div class="line"><span class="lineno"> 2452</span>                <span class="keywordflow">if</span> ((<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a> &amp; <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a> - 1)) == 0 || <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 2453</span>                    <span class="keywordflow">if</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a> != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 2454</span>                        <span class="comment">// Free the old block</span></div>
<div class="line"><span class="lineno"> 2455</span>                        this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a43b6b37af1bbb9ad927cfee34fd5ea4c">parent</a>-&gt;add_block_to_free_list(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a>);</div>
<div class="line"><span class="lineno"> 2456</span>                    }</div>
<div class="line"><span class="lineno"> 2457</span>                    </div>
<div class="line"><span class="lineno"> 2458</span>                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a> = <a class="code hl_function" href="#ac93f8bee615dc7b467bb079757ad64ba">get_block_index_entry_for_index</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a>)-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_entry.html#a4096de76021df62a854ae898f91c2c82">value</a>.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2459</span>                }</div>
<div class="line"><span class="lineno"> 2460</span>                </div>
<div class="line"><span class="lineno"> 2461</span>                ((*block)[<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a>])-&gt;~<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">T</a>();</div>
<div class="line"><span class="lineno"> 2462</span>                ++<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a>;</div>
<div class="line"><span class="lineno"> 2463</span>            }</div>
<div class="line"><span class="lineno"> 2464</span>            <span class="comment">// Even if the queue is empty, there&#39;s still one block that&#39;s not on the free list</span></div>
<div class="line"><span class="lineno"> 2465</span>            <span class="comment">// (unless the head index reached the end of it, in which case the tail will be poised</span></div>
<div class="line"><span class="lineno"> 2466</span>            <span class="comment">// to create a new block).</span></div>
<div class="line"><span class="lineno"> 2467</span>            <span class="keywordflow">if</span> (this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a5df8ac9c8c8a3d7b03dcb69b7cd142ac">tailBlock</a> != <span class="keyword">nullptr</span> &amp;&amp; (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">forceFreeLastBlock</a> || (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">tail</a> &amp; <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a> - 1)) != 0)) {</div>
<div class="line"><span class="lineno"> 2468</span>                this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a43b6b37af1bbb9ad927cfee34fd5ea4c">parent</a>-&gt;add_block_to_free_list(this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a5df8ac9c8c8a3d7b03dcb69b7cd142ac">tailBlock</a>);</div>
<div class="line"><span class="lineno"> 2469</span>            }</div>
<div class="line"><span class="lineno"> 2470</span>            </div>
<div class="line"><span class="lineno"> 2471</span>            <span class="comment">// Destroy block index</span></div>
<div class="line"><span class="lineno"> 2472</span>            <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a> = <a class="code hl_variable" href="#aff4b09564ee422ffb81feb29254d288a">blockIndex</a>.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2473</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a> != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 2474</span>                <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">i</a> = 0; <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">i</a> != <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>-&gt;capacity; ++<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">i</a>) {</div>
<div class="line"><span class="lineno"> 2475</span>                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>-&gt;index[<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">i</a>]-&gt;~BlockIndexEntry();</div>
<div class="line"><span class="lineno"> 2476</span>                }</div>
<div class="line"><span class="lineno"> 2477</span>                <span class="keywordflow">do</span> {</div>
<div class="line"><span class="lineno"> 2478</span>                    <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">prev</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>-&gt;prev;</div>
<div class="line"><span class="lineno"> 2479</span>                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>-&gt;~BlockIndexHeader();</div>
<div class="line"><span class="lineno"> 2480</span>                    (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">Traits::free</a>)(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>);</div>
<div class="line"><span class="lineno"> 2481</span>                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">prev</a>;</div>
<div class="line"><span class="lineno"> 2482</span>                } <span class="keywordflow">while</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a> != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno"> 2483</span>            }</div>
<div class="line"><span class="lineno"> 2484</span>        }</div>
<div class="ttc" id="aclassmoodycamel_1_1details_1_1_thread_exit_notifier_html_a75d86f4f47adcf30091647566496ece9"><div class="ttname"><a href="classmoodycamel_1_1details_1_1_thread_exit_notifier.html#a75d86f4f47adcf30091647566496ece9">moodycamel::details::ThreadExitNotifier::unsubscribe</a></div><div class="ttdeci">static void unsubscribe(ThreadExitListener *listener)</div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l00585">concurrentqueue.h:585</a></div></div>
<div class="ttc" id="astructmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_entry_html_a4096de76021df62a854ae898f91c2c82"><div class="ttname"><a href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_entry.html#a4096de76021df62a854ae898f91c2c82">moodycamel::ConcurrentQueue::ImplicitProducer::BlockIndexEntry::value</a></div><div class="ttdeci">std::atomic&lt; Block * &gt; value</div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l02888">concurrentqueue.h:2888</a></div></div>
<div class="ttc" id="astructmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_html_ac93f8bee615dc7b467bb079757ad64ba"><div class="ttname"><a href="#ac93f8bee615dc7b467bb079757ad64ba">moodycamel::ConcurrentQueue::ImplicitProducer::get_block_index_entry_for_index</a></div><div class="ttdeci">BlockIndexEntry * get_block_index_entry_for_index(index_t index) const</div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l02941">concurrentqueue.h:2941</a></div></div>
<div class="ttc" id="astructmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_html_af8a4586c41851ef67092ada99fc9b0ef"><div class="ttname"><a href="#af8a4586c41851ef67092ada99fc9b0ef">moodycamel::ConcurrentQueue::ImplicitProducer::threadExitListener</a></div><div class="ttdeci">details::ThreadExitListener threadExitListener</div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l03016">concurrentqueue.h:3016</a></div></div>
<div class="ttc" id="astructmoodycamel_1_1_concurrent_queue_1_1_producer_base_html_a43b6b37af1bbb9ad927cfee34fd5ea4c"><div class="ttname"><a href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a43b6b37af1bbb9ad927cfee34fd5ea4c">moodycamel::ConcurrentQueue::ProducerBase::parent</a></div><div class="ttdeci">ConcurrentQueue * parent</div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l01756">concurrentqueue.h:1756</a></div></div>
<div class="ttc" id="astructmoodycamel_1_1_concurrent_queue_1_1_producer_base_html_a5df8ac9c8c8a3d7b03dcb69b7cd142ac"><div class="ttname"><a href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a5df8ac9c8c8a3d7b03dcb69b7cd142ac">moodycamel::ConcurrentQueue::ProducerBase::tailBlock</a></div><div class="ttdeci">Block * tailBlock</div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l01752">concurrentqueue.h:1752</a></div></div>
<div class="ttc" id="astructmoodycamel_1_1_concurrent_queue_1_1_producer_base_html_ab85f3afa84aa593e919e15d6e5f48a25"><div class="ttname"><a href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#ab85f3afa84aa593e919e15d6e5f48a25">moodycamel::ConcurrentQueue::ProducerBase::tailIndex</a></div><div class="ttdeci">std::atomic&lt; index_t &gt; tailIndex</div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l01746">concurrentqueue.h:1746</a></div></div>
<div class="ttc" id="astructmoodycamel_1_1_concurrent_queue_1_1_producer_base_html_af1eeef14eaabdf2f095adf69bec68555"><div class="ttname"><a href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#af1eeef14eaabdf2f095adf69bec68555">moodycamel::ConcurrentQueue::ProducerBase::headIndex</a></div><div class="ttdeci">std::atomic&lt; index_t &gt; headIndex</div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l01747">concurrentqueue.h:1747</a></div></div>
<div class="ttc" id="astructmoodycamel_1_1details_1_1_concurrent_queue_producer_typeless_base_html_a084765e7e00d6ae481b59da7276cebba"><div class="ttname"><a href="structmoodycamel_1_1details_1_1_concurrent_queue_producer_typeless_base.html#a084765e7e00d6ae481b59da7276cebba">moodycamel::details::ConcurrentQueueProducerTypelessBase::inactive</a></div><div class="ttdeci">std::atomic&lt; bool &gt; inactive</div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l00434">concurrentqueue.h:434</a></div></div>
</div><!-- fragment --><div class="dynheader">
呼び出し関係図:</div>
<div class="dyncontent">
<div class="center"><!-- SVG 3 --></div>
</div>

</div>
</div>
<h2 class="groupheader">関数詳解</h2>
<a id="a6936059a98a709b0cfc4b637e9ad21b3" name="a6936059a98a709b0cfc4b637e9ad21b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6936059a98a709b0cfc4b637e9ad21b3">&#9670;&#160;</a></span>dequeue()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, typename Traits = ConcurrentQueueDefaultTraits&gt; </div>
<div class="memtemplate">
template&lt;typename U&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classmoodycamel_1_1_concurrent_queue.html">moodycamel::ConcurrentQueue</a>&lt; T, Traits &gt;::ImplicitProducer::dequeue </td>
          <td>(</td>
          <td class="paramtype">U &amp;</td>          <td class="paramname"><span class="paramname"><em>element</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition"> <a class="el" href="concurrentqueue_8h_source.html">concurrentqueue.h</a> の <a class="el" href="concurrentqueue_8h_source.html#l02551">2551</a> 行目に定義があります。</p>
<div class="fragment"><div class="line"><span class="lineno"> 2552</span>        {</div>
<div class="line"><span class="lineno"> 2553</span>            <span class="comment">// See ExplicitProducer::dequeue for rationale and explanation</span></div>
<div class="line"><span class="lineno"> 2554</span>            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">tail</a> = this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#ab85f3afa84aa593e919e15d6e5f48a25">tailIndex</a>.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2555</span>            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">overcommit</a> = this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a79a1dcb32a5c213a60695af0ae3db993">dequeueOvercommit</a>.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2556</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">details::circular_less_than&lt;index_t&gt;</a>(this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a359b5849773f2ee67538539910dd58cb">dequeueOptimisticCount</a>.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>) - <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">overcommit</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">tail</a>)) {</div>
<div class="line"><span class="lineno"> 2557</span>                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::atomic_thread_fence</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_acquire</a>);</div>
<div class="line"><span class="lineno"> 2558</span>                </div>
<div class="line"><span class="lineno"> 2559</span>                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">myDequeueCount</a> = this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a359b5849773f2ee67538539910dd58cb">dequeueOptimisticCount</a>.fetch_add(1, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2560</span>                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">tail</a> = this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#ab85f3afa84aa593e919e15d6e5f48a25">tailIndex</a>.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_acquire</a>);</div>
<div class="line"><span class="lineno"> 2561</span>                <span class="keywordflow">if</span> ((<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">details::likely</a>)(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">details::circular_less_than&lt;index_t&gt;</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">myDequeueCount</a> - <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">overcommit</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">tail</a>))) {</div>
<div class="line"><span class="lineno"> 2562</span>                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a> = this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#af1eeef14eaabdf2f095adf69bec68555">headIndex</a>.fetch_add(1, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_acq_rel</a>);</div>
<div class="line"><span class="lineno"> 2563</span>                    </div>
<div class="line"><span class="lineno"> 2564</span>                    <span class="comment">// Determine which block the element is in</span></div>
<div class="line"><span class="lineno"> 2565</span>                    <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">entry</a> = <a class="code hl_function" href="#ac93f8bee615dc7b467bb079757ad64ba">get_block_index_entry_for_index</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a>);</div>
<div class="line"><span class="lineno"> 2566</span>                    </div>
<div class="line"><span class="lineno"> 2567</span>                    <span class="comment">// Dequeue</span></div>
<div class="line"><span class="lineno"> 2568</span>                    <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">entry</a>-&gt;value.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2569</span>                    <span class="keyword">auto</span>&amp; <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">el</a> = *((*block)[<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a>]);</div>
<div class="line"><span class="lineno"> 2570</span>                    </div>
<div class="line"><span class="lineno"> 2571</span>                    <span class="keywordflow">if</span> (!<a class="code hl_define" href="concurrentqueue_8h.html#aaa826ee1631a720475bdc84bbb11878d">MOODYCAMEL_NOEXCEPT_ASSIGN</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">T</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">T</a>&amp;&amp;, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">element</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::move</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">el</a>))) {</div>
<div class="line"><span class="lineno"> 2572</span><span class="preprocessor">#ifdef MCDBGQ_NOLOCKFREE_IMPLICITPRODBLOCKINDEX</span></div>
<div class="line"><span class="lineno"> 2573</span>                        <span class="comment">// Note: Acquiring the mutex with every dequeue instead of only when a block</span></div>
<div class="line"><span class="lineno"> 2574</span>                        <span class="comment">// is released is very sub-optimal, but it is, after all, purely debug code.</span></div>
<div class="line"><span class="lineno"> 2575</span>                        <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">debug::DebugLock</a> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">lock</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">producer</a>-&gt;mutex);</div>
<div class="line"><span class="lineno"> 2576</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2577</span>                        <span class="keyword">struct </span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">Guard</a> {</div>
<div class="line"><span class="lineno"> 2578</span>                            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">Block</a>* <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a>;</div>
<div class="line"><span class="lineno"> 2579</span>                            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a>;</div>
<div class="line"><span class="lineno"> 2580</span>                            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BlockIndexEntry</a>* <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">entry</a>;</div>
<div class="line"><span class="lineno"> 2581</span>                            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">ConcurrentQueue</a>* <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">parent</a>;</div>
<div class="line"><span class="lineno"> 2582</span>                            </div>
<div class="line"><span class="lineno"> 2583</span>                            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">~Guard</a>()</div>
<div class="line"><span class="lineno"> 2584</span>                            {</div>
<div class="line"><span class="lineno"> 2585</span>                                (*block)[<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a>]-&gt;~T();</div>
<div class="line"><span class="lineno"> 2586</span>                                <span class="keywordflow">if</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a>-&gt;ConcurrentQueue::Block::template <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">set_empty&lt;implicit_context&gt;</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a>)) {</div>
<div class="line"><span class="lineno"> 2587</span>                                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">entry</a>-&gt;value.store(<span class="keyword">nullptr</span>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2588</span>                                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">parent</a>-&gt;<a class="code hl_function" href="classmoodycamel_1_1_concurrent_queue.html#a6c7ea19979bdc48733f942f6dba1512f">add_block_to_free_list</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a>);</div>
<div class="line"><span class="lineno"> 2589</span>                                }</div>
<div class="line"><span class="lineno"> 2590</span>                            }</div>
<div class="line"><span class="lineno"> 2591</span>                        } <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">guard</a> = { <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">entry</a>, this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a43b6b37af1bbb9ad927cfee34fd5ea4c">parent</a> };</div>
<div class="line"><span class="lineno"> 2592</span> </div>
<div class="line"><span class="lineno"> 2593</span>                        <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">element</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::move</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">el</a>); <span class="comment">// NOLINT</span></div>
<div class="line"><span class="lineno"> 2594</span>                    }</div>
<div class="line"><span class="lineno"> 2595</span>                    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2596</span>                        <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">element</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::move</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">el</a>); <span class="comment">// NOLINT</span></div>
<div class="line"><span class="lineno"> 2597</span>                        <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">el</a>.~T(); <span class="comment">// NOLINT</span></div>
<div class="line"><span class="lineno"> 2598</span> </div>
<div class="line"><span class="lineno"> 2599</span>                        <span class="keywordflow">if</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a>-&gt;ConcurrentQueue::Block::template <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">set_empty&lt;implicit_context&gt;</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a>)) {</div>
<div class="line"><span class="lineno"> 2600</span>                            {</div>
<div class="line"><span class="lineno"> 2601</span><span class="preprocessor">#ifdef MCDBGQ_NOLOCKFREE_IMPLICITPRODBLOCKINDEX</span></div>
<div class="line"><span class="lineno"> 2602</span>                                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">debug::DebugLock</a> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">lock</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">mutex</a>);</div>
<div class="line"><span class="lineno"> 2603</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2604</span>                                <span class="comment">// Add the block back into the global free pool (and remove from block index)</span></div>
<div class="line"><span class="lineno"> 2605</span>                                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">entry</a>-&gt;value.store(<span class="keyword">nullptr</span>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2606</span>                            }</div>
<div class="line"><span class="lineno"> 2607</span>                            this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a43b6b37af1bbb9ad927cfee34fd5ea4c">parent</a>-&gt;add_block_to_free_list(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a>);     <span class="comment">// releases the above store</span></div>
<div class="line"><span class="lineno"> 2608</span>                        }</div>
<div class="line"><span class="lineno"> 2609</span>                    }</div>
<div class="line"><span class="lineno"> 2610</span>                    </div>
<div class="line"><span class="lineno"> 2611</span>                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2612</span>                }</div>
<div class="line"><span class="lineno"> 2613</span>                <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2614</span>                    this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a79a1dcb32a5c213a60695af0ae3db993">dequeueOvercommit</a>.fetch_add(1, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_release</a>);</div>
<div class="line"><span class="lineno"> 2615</span>                }</div>
<div class="line"><span class="lineno"> 2616</span>            }</div>
<div class="line"><span class="lineno"> 2617</span>        </div>
<div class="line"><span class="lineno"> 2618</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2619</span>        }</div>
<div class="ttc" id="aclassmoodycamel_1_1_concurrent_queue_html_a6c7ea19979bdc48733f942f6dba1512f"><div class="ttname"><a href="classmoodycamel_1_1_concurrent_queue.html#a6c7ea19979bdc48733f942f6dba1512f">moodycamel::ConcurrentQueue::add_block_to_free_list</a></div><div class="ttdeci">void add_block_to_free_list(Block *block)</div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l03067">concurrentqueue.h:3067</a></div></div>
<div class="ttc" id="aconcurrentqueue_8h_html_aaa826ee1631a720475bdc84bbb11878d"><div class="ttname"><a href="concurrentqueue_8h.html#aaa826ee1631a720475bdc84bbb11878d">MOODYCAMEL_NOEXCEPT_ASSIGN</a></div><div class="ttdeci">#define MOODYCAMEL_NOEXCEPT_ASSIGN(type, valueType, expr)</div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l00209">concurrentqueue.h:209</a></div></div>
<div class="ttc" id="astructmoodycamel_1_1_concurrent_queue_1_1_producer_base_html_a359b5849773f2ee67538539910dd58cb"><div class="ttname"><a href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a359b5849773f2ee67538539910dd58cb">moodycamel::ConcurrentQueue::ProducerBase::dequeueOptimisticCount</a></div><div class="ttdeci">std::atomic&lt; index_t &gt; dequeueOptimisticCount</div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l01749">concurrentqueue.h:1749</a></div></div>
<div class="ttc" id="astructmoodycamel_1_1_concurrent_queue_1_1_producer_base_html_a79a1dcb32a5c213a60695af0ae3db993"><div class="ttname"><a href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a79a1dcb32a5c213a60695af0ae3db993">moodycamel::ConcurrentQueue::ProducerBase::dequeueOvercommit</a></div><div class="ttdeci">std::atomic&lt; index_t &gt; dequeueOvercommit</div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l01750">concurrentqueue.h:1750</a></div></div>
</div><!-- fragment --><div class="dynheader">
呼び出し関係図:</div>
<div class="dyncontent">
<div class="center"><!-- SVG 4 --></div>
</div>

</div>
</div>
<a id="a7f3002c7030b0f43a460eb71ef05d25a" name="a7f3002c7030b0f43a460eb71ef05d25a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f3002c7030b0f43a460eb71ef05d25a">&#9670;&#160;</a></span>dequeue_bulk()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, typename Traits = ConcurrentQueueDefaultTraits&gt; </div>
<div class="memtemplate">
template&lt;typename It&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ac0b73313ed107d313b55c8a77be19b28">size_t</a> <a class="el" href="classmoodycamel_1_1_concurrent_queue.html">moodycamel::ConcurrentQueue</a>&lt; T, Traits &gt;::ImplicitProducer::dequeue_bulk </td>
          <td>(</td>
          <td class="paramtype">It &amp;</td>          <td class="paramname"><span class="paramname"><em>itemFirst</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ac0b73313ed107d313b55c8a77be19b28">size_t</a></td>          <td class="paramname"><span class="paramname"><em>max</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition"> <a class="el" href="concurrentqueue_8h_source.html">concurrentqueue.h</a> の <a class="el" href="concurrentqueue_8h_source.html#l02780">2780</a> 行目に定義があります。</p>
<div class="fragment"><div class="line"><span class="lineno"> 2781</span>        {</div>
<div class="line"><span class="lineno"> 2782</span>            <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">tail</a> = this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#ab85f3afa84aa593e919e15d6e5f48a25">tailIndex</a>.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2783</span>            <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">overcommit</a> = this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a79a1dcb32a5c213a60695af0ae3db993">dequeueOvercommit</a>.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2784</span>            <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">desiredCount</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">tail</a> - (this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a359b5849773f2ee67538539910dd58cb">dequeueOptimisticCount</a>.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>) - <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">overcommit</a>));</div>
<div class="line"><span class="lineno"> 2785</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">details::circular_less_than&lt;size_t&gt;</a>(0, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">desiredCount</a>)) {</div>
<div class="line"><span class="lineno"> 2786</span>                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">desiredCount</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">desiredCount</a> &lt; <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">max</a> ? <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">desiredCount</a> : <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">max</a>;</div>
<div class="line"><span class="lineno"> 2787</span>                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::atomic_thread_fence</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_acquire</a>);</div>
<div class="line"><span class="lineno"> 2788</span>                </div>
<div class="line"><span class="lineno"> 2789</span>                <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">myDequeueCount</a> = this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a359b5849773f2ee67538539910dd58cb">dequeueOptimisticCount</a>.fetch_add(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">desiredCount</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2790</span>                </div>
<div class="line"><span class="lineno"> 2791</span>                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">tail</a> = this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#ab85f3afa84aa593e919e15d6e5f48a25">tailIndex</a>.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_acquire</a>);</div>
<div class="line"><span class="lineno"> 2792</span>                <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">actualCount</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">tail</a> - (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">myDequeueCount</a> - <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">overcommit</a>));</div>
<div class="line"><span class="lineno"> 2793</span>                <span class="keywordflow">if</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">details::circular_less_than&lt;size_t&gt;</a>(0, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">actualCount</a>)) {</div>
<div class="line"><span class="lineno"> 2794</span>                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">actualCount</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">desiredCount</a> &lt; <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">actualCount</a> ? <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">desiredCount</a> : <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">actualCount</a>;</div>
<div class="line"><span class="lineno"> 2795</span>                    <span class="keywordflow">if</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">actualCount</a> &lt; <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">desiredCount</a>) {</div>
<div class="line"><span class="lineno"> 2796</span>                        this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a79a1dcb32a5c213a60695af0ae3db993">dequeueOvercommit</a>.fetch_add(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">desiredCount</a> - <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">actualCount</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_release</a>);</div>
<div class="line"><span class="lineno"> 2797</span>                    }</div>
<div class="line"><span class="lineno"> 2798</span>                    </div>
<div class="line"><span class="lineno"> 2799</span>                    <span class="comment">// Get the first index. Note that since there&#39;s guaranteed to be at least actualCount elements, this</span></div>
<div class="line"><span class="lineno"> 2800</span>                    <span class="comment">// will never exceed tail.</span></div>
<div class="line"><span class="lineno"> 2801</span>                    <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">firstIndex</a> = this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#af1eeef14eaabdf2f095adf69bec68555">headIndex</a>.fetch_add(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">actualCount</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_acq_rel</a>);</div>
<div class="line"><span class="lineno"> 2802</span>                    </div>
<div class="line"><span class="lineno"> 2803</span>                    <span class="comment">// Iterate the blocks and dequeue</span></div>
<div class="line"><span class="lineno"> 2804</span>                    <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">firstIndex</a>;</div>
<div class="line"><span class="lineno"> 2805</span>                    <a class="code hl_struct" href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_header.html">BlockIndexHeader</a>* <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>;</div>
<div class="line"><span class="lineno"> 2806</span>                    <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">indexIndex</a> = <a class="code hl_function" href="#ad1ccbb67d675d29732e99ced35d27012">get_block_index_index_for_index</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>);</div>
<div class="line"><span class="lineno"> 2807</span>                    <span class="keywordflow">do</span> {</div>
<div class="line"><span class="lineno"> 2808</span>                        <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">blockStartIndex</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a>;</div>
<div class="line"><span class="lineno"> 2809</span>                        <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">endIndex</a> = (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a> &amp; <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">~static_cast&lt;index_t&gt;</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a> - 1)) + <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a>);</div>
<div class="line"><span class="lineno"> 2810</span>                        <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">endIndex</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">details::circular_less_than&lt;index_t&gt;</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">firstIndex</a> + <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">actualCount</a>), <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">endIndex</a>) ? <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">firstIndex</a> + <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">actualCount</a>) : <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">endIndex</a>;</div>
<div class="line"><span class="lineno"> 2811</span>                        </div>
<div class="line"><span class="lineno"> 2812</span>                        <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">entry</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>-&gt;index[<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">indexIndex</a>];</div>
<div class="line"><span class="lineno"> 2813</span>                        <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">entry</a>-&gt;value.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2814</span>                        <span class="keywordflow">if</span> (<a class="code hl_define" href="concurrentqueue_8h.html#aaa826ee1631a720475bdc84bbb11878d">MOODYCAMEL_NOEXCEPT_ASSIGN</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">T</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">T</a>&amp;&amp;, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">details::deref_noexcept</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">itemFirst</a>) = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::move</a>((*(*<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a>)[<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a>])))) {</div>
<div class="line"><span class="lineno"> 2815</span>                            <span class="keywordflow">while</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a> != <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">endIndex</a>) {</div>
<div class="line"><span class="lineno"> 2816</span>                                <span class="keyword">auto</span>&amp; <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">el</a> = *((*block)[<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a>]);</div>
<div class="line"><span class="lineno"> 2817</span>                                *<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">itemFirst</a>++ = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::move</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">el</a>);</div>
<div class="line"><span class="lineno"> 2818</span>                                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">el</a>.~T();</div>
<div class="line"><span class="lineno"> 2819</span>                                ++<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a>;</div>
<div class="line"><span class="lineno"> 2820</span>                            }</div>
<div class="line"><span class="lineno"> 2821</span>                        }</div>
<div class="line"><span class="lineno"> 2822</span>                        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2823</span>                            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">MOODYCAMEL_TRY</a> {</div>
<div class="line"><span class="lineno"> 2824</span>                                <span class="keywordflow">while</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a> != <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">endIndex</a>) {</div>
<div class="line"><span class="lineno"> 2825</span>                                    <span class="keyword">auto</span>&amp; <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">el</a> = *((*block)[<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a>]);</div>
<div class="line"><span class="lineno"> 2826</span>                                    *<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">itemFirst</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::move</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">el</a>);</div>
<div class="line"><span class="lineno"> 2827</span>                                    ++<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">itemFirst</a>;</div>
<div class="line"><span class="lineno"> 2828</span>                                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">el</a>.~T();</div>
<div class="line"><span class="lineno"> 2829</span>                                    ++<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a>;</div>
<div class="line"><span class="lineno"> 2830</span>                                }</div>
<div class="line"><span class="lineno"> 2831</span>                            }</div>
<div class="line"><span class="lineno"> 2832</span>                            <a class="code hl_define" href="concurrentqueue_8h.html#a9fdbd46c505d59733bbf3e206ed5c604">MOODYCAMEL_CATCH</a> (...) {</div>
<div class="line"><span class="lineno"> 2833</span>                                <span class="keywordflow">do</span> {</div>
<div class="line"><span class="lineno"> 2834</span>                                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">entry</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>-&gt;index[<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">indexIndex</a>];</div>
<div class="line"><span class="lineno"> 2835</span>                                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">entry</a>-&gt;value.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2836</span>                                    <span class="keywordflow">while</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a> != <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">endIndex</a>) {</div>
<div class="line"><span class="lineno"> 2837</span>                                        (*block)[<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a>++]-&gt;~T();</div>
<div class="line"><span class="lineno"> 2838</span>                                    }</div>
<div class="line"><span class="lineno"> 2839</span>                                    </div>
<div class="line"><span class="lineno"> 2840</span>                                    <span class="keywordflow">if</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a>-&gt;ConcurrentQueue::Block::template <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">set_many_empty&lt;implicit_context&gt;</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">blockStartIndex</a>, <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">endIndex</a> - <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">blockStartIndex</a>))) {</div>
<div class="line"><span class="lineno"> 2841</span><span class="preprocessor">#ifdef MCDBGQ_NOLOCKFREE_IMPLICITPRODBLOCKINDEX</span></div>
<div class="line"><span class="lineno"> 2842</span>                                        <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">debug::DebugLock</a> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">lock</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">mutex</a>);</div>
<div class="line"><span class="lineno"> 2843</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2844</span>                                        <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">entry</a>-&gt;value.store(<span class="keyword">nullptr</span>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2845</span>                                        this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a43b6b37af1bbb9ad927cfee34fd5ea4c">parent</a>-&gt;add_block_to_free_list(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a>);</div>
<div class="line"><span class="lineno"> 2846</span>                                    }</div>
<div class="line"><span class="lineno"> 2847</span>                                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">indexIndex</a> = (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">indexIndex</a> + 1) &amp; (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>-&gt;capacity - 1);</div>
<div class="line"><span class="lineno"> 2848</span>                                    </div>
<div class="line"><span class="lineno"> 2849</span>                                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">blockStartIndex</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a>;</div>
<div class="line"><span class="lineno"> 2850</span>                                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">endIndex</a> = (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a> &amp; <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">~static_cast&lt;index_t&gt;</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a> - 1)) + <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a>);</div>
<div class="line"><span class="lineno"> 2851</span>                                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">endIndex</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">details::circular_less_than&lt;index_t&gt;</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">firstIndex</a> + <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">actualCount</a>), <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">endIndex</a>) ? <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">firstIndex</a> + <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">actualCount</a>) : <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">endIndex</a>;</div>
<div class="line"><span class="lineno"> 2852</span>                                } <span class="keywordflow">while</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a> != <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">firstIndex</a> + <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">actualCount</a>);</div>
<div class="line"><span class="lineno"> 2853</span>                                </div>
<div class="line"><span class="lineno"> 2854</span>                                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">MOODYCAMEL_RETHROW</a>;</div>
<div class="line"><span class="lineno"> 2855</span>                            }</div>
<div class="line"><span class="lineno"> 2856</span>                        }</div>
<div class="line"><span class="lineno"> 2857</span>                        <span class="keywordflow">if</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a>-&gt;ConcurrentQueue::Block::template <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">set_many_empty&lt;implicit_context&gt;</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">blockStartIndex</a>, <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">endIndex</a> - <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">blockStartIndex</a>))) {</div>
<div class="line"><span class="lineno"> 2858</span>                            {</div>
<div class="line"><span class="lineno"> 2859</span><span class="preprocessor">#ifdef MCDBGQ_NOLOCKFREE_IMPLICITPRODBLOCKINDEX</span></div>
<div class="line"><span class="lineno"> 2860</span>                                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">debug::DebugLock</a> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">lock</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">mutex</a>);</div>
<div class="line"><span class="lineno"> 2861</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2862</span>                                <span class="comment">// Note that the set_many_empty above did a release, meaning that anybody who acquires the block</span></div>
<div class="line"><span class="lineno"> 2863</span>                                <span class="comment">// we&#39;re about to free can use it safely since our writes (and reads!) will have happened-before then.</span></div>
<div class="line"><span class="lineno"> 2864</span>                                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">entry</a>-&gt;value.store(<span class="keyword">nullptr</span>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2865</span>                            }</div>
<div class="line"><span class="lineno"> 2866</span>                            this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a43b6b37af1bbb9ad927cfee34fd5ea4c">parent</a>-&gt;add_block_to_free_list(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a>);     <span class="comment">// releases the above store</span></div>
<div class="line"><span class="lineno"> 2867</span>                        }</div>
<div class="line"><span class="lineno"> 2868</span>                        <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">indexIndex</a> = (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">indexIndex</a> + 1) &amp; (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>-&gt;capacity - 1);</div>
<div class="line"><span class="lineno"> 2869</span>                    } <span class="keywordflow">while</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a> != <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">firstIndex</a> + <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">actualCount</a>);</div>
<div class="line"><span class="lineno"> 2870</span>                    </div>
<div class="line"><span class="lineno"> 2871</span>                    <span class="keywordflow">return</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">actualCount</a>;</div>
<div class="line"><span class="lineno"> 2872</span>                }</div>
<div class="line"><span class="lineno"> 2873</span>                <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2874</span>                    this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a79a1dcb32a5c213a60695af0ae3db993">dequeueOvercommit</a>.fetch_add(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">desiredCount</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_release</a>);</div>
<div class="line"><span class="lineno"> 2875</span>                }</div>
<div class="line"><span class="lineno"> 2876</span>            }</div>
<div class="line"><span class="lineno"> 2877</span>            </div>
<div class="line"><span class="lineno"> 2878</span>            <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno"> 2879</span>        }</div>
<div class="ttc" id="aconcurrentqueue_8h_html_a9fdbd46c505d59733bbf3e206ed5c604"><div class="ttname"><a href="concurrentqueue_8h.html#a9fdbd46c505d59733bbf3e206ed5c604">MOODYCAMEL_CATCH</a></div><div class="ttdeci">#define MOODYCAMEL_CATCH(...)</div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l00181">concurrentqueue.h:181</a></div></div>
<div class="ttc" id="astructmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_header_html"><div class="ttname"><a href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_header.html">moodycamel::ConcurrentQueue::ImplicitProducer::BlockIndexHeader</a></div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l02891">concurrentqueue.h:2892</a></div></div>
<div class="ttc" id="astructmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_html_ad1ccbb67d675d29732e99ced35d27012"><div class="ttname"><a href="#ad1ccbb67d675d29732e99ced35d27012">moodycamel::ConcurrentQueue::ImplicitProducer::get_block_index_index_for_index</a></div><div class="ttdeci">size_t get_block_index_index_for_index(index_t index, BlockIndexHeader *&amp;localBlockIndex) const</div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l02948">concurrentqueue.h:2948</a></div></div>
</div><!-- fragment --><div class="dynheader">
呼び出し関係図:</div>
<div class="dyncontent">
<div class="center"><!-- SVG 5 --></div>
</div>

</div>
</div>
<a id="aa48e727740b4926065542f0abd35e565" name="aa48e727740b4926065542f0abd35e565"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa48e727740b4926065542f0abd35e565">&#9670;&#160;</a></span>enqueue()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, typename Traits = ConcurrentQueueDefaultTraits&gt; </div>
<div class="memtemplate">
template&lt;<a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ad59a292a76c2276b4d1c2b1bcd5904a9">AllocationMode</a> allocMode, typename U&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classmoodycamel_1_1_concurrent_queue.html">moodycamel::ConcurrentQueue</a>&lt; T, Traits &gt;::ImplicitProducer::enqueue </td>
          <td>(</td>
          <td class="paramtype">U &amp;&amp;</td>          <td class="paramname"><span class="paramname"><em>element</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition"> <a class="el" href="concurrentqueue_8h_source.html">concurrentqueue.h</a> の <a class="el" href="concurrentqueue_8h_source.html#l02487">2487</a> 行目に定義があります。</p>
<div class="fragment"><div class="line"><span class="lineno"> 2488</span>        {</div>
<div class="line"><span class="lineno"> 2489</span>            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a> = this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#ab85f3afa84aa593e919e15d6e5f48a25">tailIndex</a>.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2490</span>            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newTailIndex</a> = 1 + <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a>;</div>
<div class="line"><span class="lineno"> 2491</span>            <span class="keywordflow">if</span> ((<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a> &amp; <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a> - 1)) == 0) {</div>
<div class="line"><span class="lineno"> 2492</span>                <span class="comment">// We reached the end of a block, start a new one</span></div>
<div class="line"><span class="lineno"> 2493</span>                <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">head</a> = this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#af1eeef14eaabdf2f095adf69bec68555">headIndex</a>.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2494</span>                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">assert</a>(!<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">details::circular_less_than&lt;index_t&gt;</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">head</a>));</div>
<div class="line"><span class="lineno"> 2495</span>                <span class="keywordflow">if</span> (!<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">details::circular_less_than&lt;index_t&gt;</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">head</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a> + <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a>) || (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">MAX_SUBQUEUE_SIZE</a> != <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">details::const_numeric_max&lt;size_t&gt;::value</a> &amp;&amp; (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">MAX_SUBQUEUE_SIZE</a> == 0 || <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">MAX_SUBQUEUE_SIZE</a> - <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a> &lt; <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a> - <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">head</a>))) {</div>
<div class="line"><span class="lineno"> 2496</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2497</span>                }</div>
<div class="line"><span class="lineno"> 2498</span><span class="preprocessor">#ifdef MCDBGQ_NOLOCKFREE_IMPLICITPRODBLOCKINDEX</span></div>
<div class="line"><span class="lineno"> 2499</span>                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">debug::DebugLock</a> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">lock</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">mutex</a>);</div>
<div class="line"><span class="lineno"> 2500</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2501</span>                <span class="comment">// Find out where we&#39;ll be inserting this block in the block index</span></div>
<div class="line"><span class="lineno"> 2502</span>                <a class="code hl_struct" href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_entry.html">BlockIndexEntry</a>* <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">idxEntry</a>;</div>
<div class="line"><span class="lineno"> 2503</span>                <span class="keywordflow">if</span> (!<a class="code hl_function" href="#aa6d3e5e6b4316468ae9516dddddcb1bc">insert_block_index_entry&lt;allocMode&gt;</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">idxEntry</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a>)) {</div>
<div class="line"><span class="lineno"> 2504</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2505</span>                }</div>
<div class="line"><span class="lineno"> 2506</span>                </div>
<div class="line"><span class="lineno"> 2507</span>                <span class="comment">// Get ahold of a new block</span></div>
<div class="line"><span class="lineno"> 2508</span>                <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newBlock</a> = this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a43b6b37af1bbb9ad927cfee34fd5ea4c">parent</a>-&gt;ConcurrentQueue::template <a class="code hl_function" href="classmoodycamel_1_1_concurrent_queue.html#afc9237a20ca8b9d2e0e824367044cd55">requisition_block&lt;allocMode&gt;</a>();</div>
<div class="line"><span class="lineno"> 2509</span>                <span class="keywordflow">if</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newBlock</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 2510</span>                    <a class="code hl_function" href="#ac5e3152c1585fc55870f369953def5d3">rewind_block_index_tail</a>();</div>
<div class="line"><span class="lineno"> 2511</span>                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">idxEntry</a>-&gt;value.store(<span class="keyword">nullptr</span>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2512</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2513</span>                }</div>
<div class="line"><span class="lineno"> 2514</span><span class="preprocessor">#ifdef MCDBGQ_TRACKMEM</span></div>
<div class="line"><span class="lineno"> 2515</span>                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newBlock</a>-&gt;owner = <span class="keyword">this</span>;</div>
<div class="line"><span class="lineno"> 2516</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2517</span>                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newBlock</a>-&gt;ConcurrentQueue::Block::template <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">reset_empty&lt;implicit_context&gt;</a>();</div>
<div class="line"><span class="lineno"> 2518</span> </div>
<div class="line"><span class="lineno"> 2519</span>                <a class="code hl_define" href="concurrentqueue_8h.html#a957a003c2194ffd8b8747f8ed288509a">MOODYCAMEL_CONSTEXPR_IF</a> (!<a class="code hl_define" href="concurrentqueue_8h.html#a6c7c2f735d984f72972444429b539734">MOODYCAMEL_NOEXCEPT_CTOR</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">T</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">U</a>, <span class="keyword">new</span> (<span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">T</a>*<span class="keyword">&gt;</span>(<span class="keyword">nullptr</span>)) <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">T</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::forward&lt;U&gt;</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">element</a>)))) {</div>
<div class="line"><span class="lineno"> 2520</span>                    <span class="comment">// May throw, try to insert now before we publish the fact that we have this new block</span></div>
<div class="line"><span class="lineno"> 2521</span>                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">MOODYCAMEL_TRY</a> {</div>
<div class="line"><span class="lineno"> 2522</span>                        <span class="keyword">new</span> ((*newBlock)[<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a>]) <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">T</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::forward&lt;U&gt;</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">element</a>));</div>
<div class="line"><span class="lineno"> 2523</span>                    }</div>
<div class="line"><span class="lineno"> 2524</span>                    <a class="code hl_define" href="concurrentqueue_8h.html#a9fdbd46c505d59733bbf3e206ed5c604">MOODYCAMEL_CATCH</a> (...) {</div>
<div class="line"><span class="lineno"> 2525</span>                        <a class="code hl_function" href="#ac5e3152c1585fc55870f369953def5d3">rewind_block_index_tail</a>();</div>
<div class="line"><span class="lineno"> 2526</span>                        <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">idxEntry</a>-&gt;value.store(<span class="keyword">nullptr</span>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2527</span>                        this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a43b6b37af1bbb9ad927cfee34fd5ea4c">parent</a>-&gt;add_block_to_free_list(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newBlock</a>);</div>
<div class="line"><span class="lineno"> 2528</span>                        <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">MOODYCAMEL_RETHROW</a>;</div>
<div class="line"><span class="lineno"> 2529</span>                    }</div>
<div class="line"><span class="lineno"> 2530</span>                }</div>
<div class="line"><span class="lineno"> 2531</span>                </div>
<div class="line"><span class="lineno"> 2532</span>                <span class="comment">// Insert the new block into the index</span></div>
<div class="line"><span class="lineno"> 2533</span>                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">idxEntry</a>-&gt;value.store(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newBlock</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2534</span>                </div>
<div class="line"><span class="lineno"> 2535</span>                this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a5df8ac9c8c8a3d7b03dcb69b7cd142ac">tailBlock</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newBlock</a>;</div>
<div class="line"><span class="lineno"> 2536</span>                </div>
<div class="line"><span class="lineno"> 2537</span>                <a class="code hl_define" href="concurrentqueue_8h.html#a957a003c2194ffd8b8747f8ed288509a">MOODYCAMEL_CONSTEXPR_IF</a> (!<a class="code hl_define" href="concurrentqueue_8h.html#a6c7c2f735d984f72972444429b539734">MOODYCAMEL_NOEXCEPT_CTOR</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">T</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">U</a>, <span class="keyword">new</span> (<span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">T</a>*<span class="keyword">&gt;</span>(<span class="keyword">nullptr</span>)) <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">T</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::forward&lt;U&gt;</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">element</a>)))) {</div>
<div class="line"><span class="lineno"> 2538</span>                    this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#ab85f3afa84aa593e919e15d6e5f48a25">tailIndex</a>.store(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newTailIndex</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_release</a>);</div>
<div class="line"><span class="lineno"> 2539</span>                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2540</span>                }</div>
<div class="line"><span class="lineno"> 2541</span>            }</div>
<div class="line"><span class="lineno"> 2542</span>            </div>
<div class="line"><span class="lineno"> 2543</span>            <span class="comment">// Enqueue</span></div>
<div class="line"><span class="lineno"> 2544</span>            <span class="keyword">new</span> ((*this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a5df8ac9c8c8a3d7b03dcb69b7cd142ac">tailBlock</a>)[<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a>]) <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">T</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::forward&lt;U&gt;</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">element</a>));</div>
<div class="line"><span class="lineno"> 2545</span>            </div>
<div class="line"><span class="lineno"> 2546</span>            this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#ab85f3afa84aa593e919e15d6e5f48a25">tailIndex</a>.store(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newTailIndex</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_release</a>);</div>
<div class="line"><span class="lineno"> 2547</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2548</span>        }</div>
<div class="ttc" id="aclassmoodycamel_1_1_concurrent_queue_html_afc9237a20ca8b9d2e0e824367044cd55"><div class="ttname"><a href="classmoodycamel_1_1_concurrent_queue.html#afc9237a20ca8b9d2e0e824367044cd55">moodycamel::ConcurrentQueue::requisition_block</a></div><div class="ttdeci">Block * requisition_block()</div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l03096">concurrentqueue.h:3096</a></div></div>
<div class="ttc" id="aconcurrentqueue_8h_html_a6c7c2f735d984f72972444429b539734"><div class="ttname"><a href="concurrentqueue_8h.html#a6c7c2f735d984f72972444429b539734">MOODYCAMEL_NOEXCEPT_CTOR</a></div><div class="ttdeci">#define MOODYCAMEL_NOEXCEPT_CTOR(type, valueType, expr)</div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l00208">concurrentqueue.h:208</a></div></div>
<div class="ttc" id="aconcurrentqueue_8h_html_a957a003c2194ffd8b8747f8ed288509a"><div class="ttname"><a href="concurrentqueue_8h.html#a957a003c2194ffd8b8747f8ed288509a">MOODYCAMEL_CONSTEXPR_IF</a></div><div class="ttdeci">#define MOODYCAMEL_CONSTEXPR_IF</div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l00168">concurrentqueue.h:168</a></div></div>
<div class="ttc" id="astructmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_entry_html"><div class="ttname"><a href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_entry.html">moodycamel::ConcurrentQueue::ImplicitProducer::BlockIndexEntry</a></div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l02885">concurrentqueue.h:2886</a></div></div>
<div class="ttc" id="astructmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_html_aa6d3e5e6b4316468ae9516dddddcb1bc"><div class="ttname"><a href="#aa6d3e5e6b4316468ae9516dddddcb1bc">moodycamel::ConcurrentQueue::ImplicitProducer::insert_block_index_entry</a></div><div class="ttdeci">bool insert_block_index_entry(BlockIndexEntry *&amp;idxEntry, index_t blockStartIndex)</div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l02901">concurrentqueue.h:2901</a></div></div>
<div class="ttc" id="astructmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_html_ac5e3152c1585fc55870f369953def5d3"><div class="ttname"><a href="#ac5e3152c1585fc55870f369953def5d3">moodycamel::ConcurrentQueue::ImplicitProducer::rewind_block_index_tail</a></div><div class="ttdeci">void rewind_block_index_tail()</div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l02935">concurrentqueue.h:2935</a></div></div>
</div><!-- fragment --><div class="dynheader">
呼び出し関係図:</div>
<div class="dyncontent">
<div class="center"><!-- SVG 6 --></div>
</div>

</div>
</div>
<a id="a6b32bec6e776a10946ed78f0b8281f23" name="a6b32bec6e776a10946ed78f0b8281f23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b32bec6e776a10946ed78f0b8281f23">&#9670;&#160;</a></span>enqueue_bulk()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, typename Traits = ConcurrentQueueDefaultTraits&gt; </div>
<div class="memtemplate">
template&lt;<a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ad59a292a76c2276b4d1c2b1bcd5904a9">AllocationMode</a> allocMode, typename It&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classmoodycamel_1_1_concurrent_queue.html">moodycamel::ConcurrentQueue</a>&lt; T, Traits &gt;::ImplicitProducer::enqueue_bulk </td>
          <td>(</td>
          <td class="paramtype">It</td>          <td class="paramname"><span class="paramname"><em>itemFirst</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ac0b73313ed107d313b55c8a77be19b28">size_t</a></td>          <td class="paramname"><span class="paramname"><em>count</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition"> <a class="el" href="concurrentqueue_8h_source.html">concurrentqueue.h</a> の <a class="el" href="concurrentqueue_8h_source.html#l02626">2626</a> 行目に定義があります。</p>
<div class="fragment"><div class="line"><span class="lineno"> 2627</span>        {</div>
<div class="line"><span class="lineno"> 2628</span>            <span class="comment">// First, we need to make sure we have enough room to enqueue all of the elements;</span></div>
<div class="line"><span class="lineno"> 2629</span>            <span class="comment">// this means pre-allocating blocks and putting them in the block index (but only if</span></div>
<div class="line"><span class="lineno"> 2630</span>            <span class="comment">// all the allocations succeeded).</span></div>
<div class="line"><span class="lineno"> 2631</span>            </div>
<div class="line"><span class="lineno"> 2632</span>            <span class="comment">// Note that the tailBlock we start off with may not be owned by us any more;</span></div>
<div class="line"><span class="lineno"> 2633</span>            <span class="comment">// this happens if it was filled up exactly to the top (setting tailIndex to</span></div>
<div class="line"><span class="lineno"> 2634</span>            <span class="comment">// the first index of the next block which is not yet allocated), then dequeued</span></div>
<div class="line"><span class="lineno"> 2635</span>            <span class="comment">// completely (putting it on the free list) before we enqueue again.</span></div>
<div class="line"><span class="lineno"> 2636</span>            </div>
<div class="line"><span class="lineno"> 2637</span>            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">startTailIndex</a> = this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#ab85f3afa84aa593e919e15d6e5f48a25">tailIndex</a>.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2638</span>            <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">startBlock</a> = this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a5df8ac9c8c8a3d7b03dcb69b7cd142ac">tailBlock</a>;</div>
<div class="line"><span class="lineno"> 2639</span>            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">Block</a>* <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">firstAllocatedBlock</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 2640</span>            <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">endBlock</a> = this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a5df8ac9c8c8a3d7b03dcb69b7cd142ac">tailBlock</a>;</div>
<div class="line"><span class="lineno"> 2641</span>            </div>
<div class="line"><span class="lineno"> 2642</span>            <span class="comment">// Figure out how many blocks we&#39;ll need to allocate, and do so</span></div>
<div class="line"><span class="lineno"> 2643</span>            <span class="keywordtype">size_t</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">blockBaseDiff</a> = ((<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">startTailIndex</a> + <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">count</a> - 1) &amp; <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">~static_cast&lt;index_t&gt;</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a> - 1)) - ((<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">startTailIndex</a> - 1) &amp; ~<span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a> - 1));</div>
<div class="line"><span class="lineno"> 2644</span>            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a> = (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">startTailIndex</a> - 1) &amp; ~<span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a> - 1);</div>
<div class="line"><span class="lineno"> 2645</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">blockBaseDiff</a> &gt; 0) {</div>
<div class="line"><span class="lineno"> 2646</span><span class="preprocessor">#ifdef MCDBGQ_NOLOCKFREE_IMPLICITPRODBLOCKINDEX</span></div>
<div class="line"><span class="lineno"> 2647</span>                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">debug::DebugLock</a> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">lock</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">mutex</a>);</div>
<div class="line"><span class="lineno"> 2648</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2649</span>                <span class="keywordflow">do</span> {</div>
<div class="line"><span class="lineno"> 2650</span>                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">blockBaseDiff</a> -= <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a>);</div>
<div class="line"><span class="lineno"> 2651</span>                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a> += <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a>);</div>
<div class="line"><span class="lineno"> 2652</span>                    </div>
<div class="line"><span class="lineno"> 2653</span>                    <span class="comment">// Find out where we&#39;ll be inserting this block in the block index</span></div>
<div class="line"><span class="lineno"> 2654</span>                    <a class="code hl_struct" href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_entry.html">BlockIndexEntry</a>* <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">idxEntry</a> = <span class="keyword">nullptr</span>;  <span class="comment">// initialization here unnecessary but compiler can&#39;t always tell</span></div>
<div class="line"><span class="lineno"> 2655</span>                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">Block</a>* <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newBlock</a>;</div>
<div class="line"><span class="lineno"> 2656</span>                    <span class="keywordtype">bool</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">indexInserted</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2657</span>                    <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">head</a> = this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#af1eeef14eaabdf2f095adf69bec68555">headIndex</a>.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2658</span>                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">assert</a>(!<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">details::circular_less_than&lt;index_t&gt;</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">head</a>));</div>
<div class="line"><span class="lineno"> 2659</span>                    <span class="keywordtype">bool</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">full</a> = !<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">details::circular_less_than&lt;index_t&gt;</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">head</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a> + <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a>) || (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">MAX_SUBQUEUE_SIZE</a> != <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">details::const_numeric_max&lt;size_t&gt;::value</a> &amp;&amp; (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">MAX_SUBQUEUE_SIZE</a> == 0 || <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">MAX_SUBQUEUE_SIZE</a> - <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a> &lt; <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a> - <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">head</a>));</div>
<div class="line"><span class="lineno"> 2660</span> </div>
<div class="line"><span class="lineno"> 2661</span>                    <span class="keywordflow">if</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">full</a> || !(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">indexInserted</a> = <a class="code hl_function" href="#aa6d3e5e6b4316468ae9516dddddcb1bc">insert_block_index_entry&lt;allocMode&gt;</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">idxEntry</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a>)) || (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newBlock</a> = this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a43b6b37af1bbb9ad927cfee34fd5ea4c">parent</a>-&gt;ConcurrentQueue::template <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">requisition_block&lt;allocMode&gt;</a>()) == <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 2662</span>                        <span class="comment">// Index allocation or block allocation failed; revert any other allocations</span></div>
<div class="line"><span class="lineno"> 2663</span>                        <span class="comment">// and index insertions done so far for this operation</span></div>
<div class="line"><span class="lineno"> 2664</span>                        <span class="keywordflow">if</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">indexInserted</a>) {</div>
<div class="line"><span class="lineno"> 2665</span>                            <a class="code hl_function" href="#ac5e3152c1585fc55870f369953def5d3">rewind_block_index_tail</a>();</div>
<div class="line"><span class="lineno"> 2666</span>                            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">idxEntry</a>-&gt;value.store(<span class="keyword">nullptr</span>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2667</span>                        }</div>
<div class="line"><span class="lineno"> 2668</span>                        <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a> = (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">startTailIndex</a> - 1) &amp; ~<span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a> - 1);</div>
<div class="line"><span class="lineno"> 2669</span>                        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">firstAllocatedBlock</a>; <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a> != <span class="keyword">nullptr</span>; <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a>-&gt;next) {</div>
<div class="line"><span class="lineno"> 2670</span>                            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a> += <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a>);</div>
<div class="line"><span class="lineno"> 2671</span>                            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">idxEntry</a> = <a class="code hl_function" href="#ac93f8bee615dc7b467bb079757ad64ba">get_block_index_entry_for_index</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a>);</div>
<div class="line"><span class="lineno"> 2672</span>                            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">idxEntry</a>-&gt;value.store(<span class="keyword">nullptr</span>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2673</span>                            <a class="code hl_function" href="#ac5e3152c1585fc55870f369953def5d3">rewind_block_index_tail</a>();</div>
<div class="line"><span class="lineno"> 2674</span>                        }</div>
<div class="line"><span class="lineno"> 2675</span>                        this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a43b6b37af1bbb9ad927cfee34fd5ea4c">parent</a>-&gt;add_blocks_to_free_list(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">firstAllocatedBlock</a>);</div>
<div class="line"><span class="lineno"> 2676</span>                        this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a5df8ac9c8c8a3d7b03dcb69b7cd142ac">tailBlock</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">startBlock</a>;</div>
<div class="line"><span class="lineno"> 2677</span>                        </div>
<div class="line"><span class="lineno"> 2678</span>                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2679</span>                    }</div>
<div class="line"><span class="lineno"> 2680</span>                    </div>
<div class="line"><span class="lineno"> 2681</span><span class="preprocessor">#ifdef MCDBGQ_TRACKMEM</span></div>
<div class="line"><span class="lineno"> 2682</span>                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newBlock</a>-&gt;owner = <span class="keyword">this</span>;</div>
<div class="line"><span class="lineno"> 2683</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2684</span>                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newBlock</a>-&gt;ConcurrentQueue::Block::template <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">reset_empty&lt;implicit_context&gt;</a>();</div>
<div class="line"><span class="lineno"> 2685</span>                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newBlock</a>-&gt;next = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 2686</span>                    </div>
<div class="line"><span class="lineno"> 2687</span>                    <span class="comment">// Insert the new block into the index</span></div>
<div class="line"><span class="lineno"> 2688</span>                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">idxEntry</a>-&gt;value.store(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newBlock</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2689</span>                    </div>
<div class="line"><span class="lineno"> 2690</span>                    <span class="comment">// Store the chain of blocks so that we can undo if later allocations fail,</span></div>
<div class="line"><span class="lineno"> 2691</span>                    <span class="comment">// and so that we can find the blocks when we do the actual enqueueing</span></div>
<div class="line"><span class="lineno"> 2692</span>                    <span class="keywordflow">if</span> ((<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">startTailIndex</a> &amp; <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a> - 1)) != 0 || <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">firstAllocatedBlock</a> != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 2693</span>                        <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">assert</a>(this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a5df8ac9c8c8a3d7b03dcb69b7cd142ac">tailBlock</a> != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno"> 2694</span>                        this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a5df8ac9c8c8a3d7b03dcb69b7cd142ac">tailBlock</a>-&gt;next = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newBlock</a>;</div>
<div class="line"><span class="lineno"> 2695</span>                    }</div>
<div class="line"><span class="lineno"> 2696</span>                    this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a5df8ac9c8c8a3d7b03dcb69b7cd142ac">tailBlock</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newBlock</a>;</div>
<div class="line"><span class="lineno"> 2697</span>                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">endBlock</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newBlock</a>;</div>
<div class="line"><span class="lineno"> 2698</span>                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">firstAllocatedBlock</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">firstAllocatedBlock</a> == <span class="keyword">nullptr</span> ? <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newBlock</a> : <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">firstAllocatedBlock</a>;</div>
<div class="line"><span class="lineno"> 2699</span>                } <span class="keywordflow">while</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">blockBaseDiff</a> &gt; 0);</div>
<div class="line"><span class="lineno"> 2700</span>            }</div>
<div class="line"><span class="lineno"> 2701</span>            </div>
<div class="line"><span class="lineno"> 2702</span>            <span class="comment">// Enqueue, one block at a time</span></div>
<div class="line"><span class="lineno"> 2703</span>            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newTailIndex</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">startTailIndex</a> + <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">count</a>);</div>
<div class="line"><span class="lineno"> 2704</span>            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">startTailIndex</a>;</div>
<div class="line"><span class="lineno"> 2705</span>            this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a5df8ac9c8c8a3d7b03dcb69b7cd142ac">tailBlock</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">startBlock</a>;</div>
<div class="line"><span class="lineno"> 2706</span>            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">assert</a>((<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">startTailIndex</a> &amp; <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a> - 1)) != 0 || <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">firstAllocatedBlock</a> != <span class="keyword">nullptr</span> || <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">count</a> == 0);</div>
<div class="line"><span class="lineno"> 2707</span>            <span class="keywordflow">if</span> ((<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">startTailIndex</a> &amp; <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a> - 1)) == 0 &amp;&amp; <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">firstAllocatedBlock</a> != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 2708</span>                this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a5df8ac9c8c8a3d7b03dcb69b7cd142ac">tailBlock</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">firstAllocatedBlock</a>;</div>
<div class="line"><span class="lineno"> 2709</span>            }</div>
<div class="line"><span class="lineno"> 2710</span>            <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><span class="lineno"> 2711</span>                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">stopIndex</a> = (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a> &amp; <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">~static_cast&lt;index_t&gt;</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a> - 1)) + <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a>);</div>
<div class="line"><span class="lineno"> 2712</span>                <span class="keywordflow">if</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">details::circular_less_than&lt;index_t&gt;</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newTailIndex</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">stopIndex</a>)) {</div>
<div class="line"><span class="lineno"> 2713</span>                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">stopIndex</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newTailIndex</a>;</div>
<div class="line"><span class="lineno"> 2714</span>                }</div>
<div class="line"><span class="lineno"> 2715</span>                <a class="code hl_define" href="concurrentqueue_8h.html#a957a003c2194ffd8b8747f8ed288509a">MOODYCAMEL_CONSTEXPR_IF</a> (<a class="code hl_define" href="concurrentqueue_8h.html#a6c7c2f735d984f72972444429b539734">MOODYCAMEL_NOEXCEPT_CTOR</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">T</a>, <span class="keyword">decltype</span>(*<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">itemFirst</a>), <span class="keyword">new</span> (<span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">T</a>*<span class="keyword">&gt;</span>(<span class="keyword">nullptr</span>)) <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">T</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">details::deref_noexcept</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">itemFirst</a>)))) {</div>
<div class="line"><span class="lineno"> 2716</span>                    <span class="keywordflow">while</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a> != <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">stopIndex</a>) {</div>
<div class="line"><span class="lineno"> 2717</span>                        <span class="keyword">new</span> ((*this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a5df8ac9c8c8a3d7b03dcb69b7cd142ac">tailBlock</a>)[<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a>++]) <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">T</a>(*<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">itemFirst</a>++);</div>
<div class="line"><span class="lineno"> 2718</span>                    }</div>
<div class="line"><span class="lineno"> 2719</span>                }</div>
<div class="line"><span class="lineno"> 2720</span>                <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2721</span>                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">MOODYCAMEL_TRY</a> {</div>
<div class="line"><span class="lineno"> 2722</span>                        <span class="keywordflow">while</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a> != <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">stopIndex</a>) {</div>
<div class="line"><span class="lineno"> 2723</span>                            <span class="keyword">new</span> ((*this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a5df8ac9c8c8a3d7b03dcb69b7cd142ac">tailBlock</a>)[<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a>]) <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">T</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">details::nomove_if</a>&lt;!<a class="code hl_define" href="concurrentqueue_8h.html#a6c7c2f735d984f72972444429b539734">MOODYCAMEL_NOEXCEPT_CTOR</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">T</a>, <span class="keyword">decltype</span>(*<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">itemFirst</a>), <span class="keyword">new</span> (<span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">T</a>*<span class="keyword">&gt;</span>(<span class="keyword">nullptr</span>)) <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">T</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">details::deref_noexcept</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">itemFirst</a>)))&gt;<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">::eval</a>(*<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">itemFirst</a>));</div>
<div class="line"><span class="lineno"> 2724</span>                            ++<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a>;</div>
<div class="line"><span class="lineno"> 2725</span>                            ++<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">itemFirst</a>;</div>
<div class="line"><span class="lineno"> 2726</span>                        }</div>
<div class="line"><span class="lineno"> 2727</span>                    }</div>
<div class="line"><span class="lineno"> 2728</span>                    <a class="code hl_define" href="concurrentqueue_8h.html#a9fdbd46c505d59733bbf3e206ed5c604">MOODYCAMEL_CATCH</a> (...) {</div>
<div class="line"><span class="lineno"> 2729</span>                        <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">constructedStopIndex</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a>;</div>
<div class="line"><span class="lineno"> 2730</span>                        <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">lastBlockEnqueued</a> = this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a5df8ac9c8c8a3d7b03dcb69b7cd142ac">tailBlock</a>;</div>
<div class="line"><span class="lineno"> 2731</span>                        </div>
<div class="line"><span class="lineno"> 2732</span>                        <span class="keywordflow">if</span> (!<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">details::is_trivially_destructible&lt;T&gt;::value</a>) {</div>
<div class="line"><span class="lineno"> 2733</span>                            <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">startBlock</a>;</div>
<div class="line"><span class="lineno"> 2734</span>                            <span class="keywordflow">if</span> ((<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">startTailIndex</a> &amp; <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a> - 1)) == 0) {</div>
<div class="line"><span class="lineno"> 2735</span>                                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">firstAllocatedBlock</a>;</div>
<div class="line"><span class="lineno"> 2736</span>                            }</div>
<div class="line"><span class="lineno"> 2737</span>                            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">startTailIndex</a>;</div>
<div class="line"><span class="lineno"> 2738</span>                            <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><span class="lineno"> 2739</span>                                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">stopIndex</a> = (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a> &amp; <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">~static_cast&lt;index_t&gt;</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a> - 1)) + <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a>);</div>
<div class="line"><span class="lineno"> 2740</span>                                <span class="keywordflow">if</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">details::circular_less_than&lt;index_t&gt;</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">constructedStopIndex</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">stopIndex</a>)) {</div>
<div class="line"><span class="lineno"> 2741</span>                                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">stopIndex</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">constructedStopIndex</a>;</div>
<div class="line"><span class="lineno"> 2742</span>                                }</div>
<div class="line"><span class="lineno"> 2743</span>                                <span class="keywordflow">while</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a> != <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">stopIndex</a>) {</div>
<div class="line"><span class="lineno"> 2744</span>                                    (*block)[<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a>++]-&gt;~T();</div>
<div class="line"><span class="lineno"> 2745</span>                                }</div>
<div class="line"><span class="lineno"> 2746</span>                                <span class="keywordflow">if</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a> == <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">lastBlockEnqueued</a>) {</div>
<div class="line"><span class="lineno"> 2747</span>                                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2748</span>                                }</div>
<div class="line"><span class="lineno"> 2749</span>                                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a>-&gt;next;</div>
<div class="line"><span class="lineno"> 2750</span>                            }</div>
<div class="line"><span class="lineno"> 2751</span>                        }</div>
<div class="line"><span class="lineno"> 2752</span>                        </div>
<div class="line"><span class="lineno"> 2753</span>                        <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a> = (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">startTailIndex</a> - 1) &amp; ~<span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a> - 1);</div>
<div class="line"><span class="lineno"> 2754</span>                        <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">firstAllocatedBlock</a>; <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a> != <span class="keyword">nullptr</span>; <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">block</a>-&gt;next) {</div>
<div class="line"><span class="lineno"> 2755</span>                            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a> += <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index_t</a><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a>);</div>
<div class="line"><span class="lineno"> 2756</span>                            <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">idxEntry</a> = <a class="code hl_function" href="#ac93f8bee615dc7b467bb079757ad64ba">get_block_index_entry_for_index</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a>);</div>
<div class="line"><span class="lineno"> 2757</span>                            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">idxEntry</a>-&gt;value.store(<span class="keyword">nullptr</span>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2758</span>                            <a class="code hl_function" href="#ac5e3152c1585fc55870f369953def5d3">rewind_block_index_tail</a>();</div>
<div class="line"><span class="lineno"> 2759</span>                        }</div>
<div class="line"><span class="lineno"> 2760</span>                        this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a43b6b37af1bbb9ad927cfee34fd5ea4c">parent</a>-&gt;add_blocks_to_free_list(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">firstAllocatedBlock</a>);</div>
<div class="line"><span class="lineno"> 2761</span>                        this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a5df8ac9c8c8a3d7b03dcb69b7cd142ac">tailBlock</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">startBlock</a>;</div>
<div class="line"><span class="lineno"> 2762</span>                        <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">MOODYCAMEL_RETHROW</a>;</div>
<div class="line"><span class="lineno"> 2763</span>                    }</div>
<div class="line"><span class="lineno"> 2764</span>                }</div>
<div class="line"><span class="lineno"> 2765</span>                </div>
<div class="line"><span class="lineno"> 2766</span>                <span class="keywordflow">if</span> (this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a5df8ac9c8c8a3d7b03dcb69b7cd142ac">tailBlock</a> == <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">endBlock</a>) {</div>
<div class="line"><span class="lineno"> 2767</span>                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">assert</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">currentTailIndex</a> == <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newTailIndex</a>);</div>
<div class="line"><span class="lineno"> 2768</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2769</span>                }</div>
<div class="line"><span class="lineno"> 2770</span>                this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a5df8ac9c8c8a3d7b03dcb69b7cd142ac">tailBlock</a> = this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#a5df8ac9c8c8a3d7b03dcb69b7cd142ac">tailBlock</a>-&gt;next;</div>
<div class="line"><span class="lineno"> 2771</span>            }</div>
<div class="line"><span class="lineno"> 2772</span>            this-&gt;<a class="code hl_variable" href="structmoodycamel_1_1_concurrent_queue_1_1_producer_base.html#ab85f3afa84aa593e919e15d6e5f48a25">tailIndex</a>.store(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newTailIndex</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_release</a>);</div>
<div class="line"><span class="lineno"> 2773</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2774</span>        }</div>
</div><!-- fragment --><div class="dynheader">
呼び出し関係図:</div>
<div class="dyncontent">
<div class="center"><!-- SVG 7 --></div>
</div>

</div>
</div>
<a id="ac93f8bee615dc7b467bb079757ad64ba" name="ac93f8bee615dc7b467bb079757ad64ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac93f8bee615dc7b467bb079757ad64ba">&#9670;&#160;</a></span>get_block_index_entry_for_index()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, typename Traits = ConcurrentQueueDefaultTraits&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_entry.html">BlockIndexEntry</a> * <a class="el" href="classmoodycamel_1_1_concurrent_queue.html">moodycamel::ConcurrentQueue</a>&lt; T, Traits &gt;::ImplicitProducer::get_block_index_entry_for_index </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ad68d536c896de4e839dd95225e7deea3">index_t</a></td>          <td class="paramname"><span class="paramname"><em>index</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition"> <a class="el" href="concurrentqueue_8h_source.html">concurrentqueue.h</a> の <a class="el" href="concurrentqueue_8h_source.html#l02941">2941</a> 行目に定義があります。</p>
<div class="fragment"><div class="line"><span class="lineno"> 2942</span>        {</div>
<div class="line"><span class="lineno"> 2943</span>            <a class="code hl_struct" href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_header.html">BlockIndexHeader</a>* <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>;</div>
<div class="line"><span class="lineno"> 2944</span>            <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">idx</a> = <a class="code hl_function" href="#ad1ccbb67d675d29732e99ced35d27012">get_block_index_index_for_index</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>);</div>
<div class="line"><span class="lineno"> 2945</span>            <span class="keywordflow">return</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>-&gt;index[<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">idx</a>];</div>
<div class="line"><span class="lineno"> 2946</span>        }</div>
</div><!-- fragment --><div class="dynheader">
呼び出し関係図:</div>
<div class="dyncontent">
<div class="center"><!-- SVG 8 --></div>
</div>
<div class="dynheader">
被呼び出し関係図:</div>
<div class="dyncontent">
<div class="center"><!-- SVG 9 --></div>
</div>

</div>
</div>
<a id="ad1ccbb67d675d29732e99ced35d27012" name="ad1ccbb67d675d29732e99ced35d27012"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1ccbb67d675d29732e99ced35d27012">&#9670;&#160;</a></span>get_block_index_index_for_index()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, typename Traits = ConcurrentQueueDefaultTraits&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ac0b73313ed107d313b55c8a77be19b28">size_t</a> <a class="el" href="classmoodycamel_1_1_concurrent_queue.html">moodycamel::ConcurrentQueue</a>&lt; T, Traits &gt;::ImplicitProducer::get_block_index_index_for_index </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ad68d536c896de4e839dd95225e7deea3">index_t</a></td>          <td class="paramname"><span class="paramname"><em>index</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_header.html">BlockIndexHeader</a> *&amp;</td>          <td class="paramname"><span class="paramname"><em>localBlockIndex</em></span>&#160;) const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition"> <a class="el" href="concurrentqueue_8h_source.html">concurrentqueue.h</a> の <a class="el" href="concurrentqueue_8h_source.html#l02948">2948</a> 行目に定義があります。</p>
<div class="fragment"><div class="line"><span class="lineno"> 2949</span>        {</div>
<div class="line"><span class="lineno"> 2950</span><span class="preprocessor">#ifdef MCDBGQ_NOLOCKFREE_IMPLICITPRODBLOCKINDEX</span></div>
<div class="line"><span class="lineno"> 2951</span>            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">debug::DebugLock</a> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">lock</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">mutex</a>);</div>
<div class="line"><span class="lineno"> 2952</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2953</span>            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a> &amp;= <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">~static_cast&lt;index_t&gt;</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a> - 1);</div>
<div class="line"><span class="lineno"> 2954</span>            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a> = <a class="code hl_variable" href="#aff4b09564ee422ffb81feb29254d288a">blockIndex</a>.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_acquire</a>);</div>
<div class="line"><span class="lineno"> 2955</span>            <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">tail</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>-&gt;tail.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_acquire</a>);</div>
<div class="line"><span class="lineno"> 2956</span>            <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">tailBase</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>-&gt;index[<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">tail</a>]-&gt;key.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2957</span>            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">assert</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">tailBase</a> != <a class="code hl_variable" href="#ad6584eb1791fa6e8f21895c5cff378c9">INVALID_BLOCK_BASE</a>);</div>
<div class="line"><span class="lineno"> 2958</span>            <span class="comment">// Note: Must use division instead of shift because the index may wrap around, causing a negative</span></div>
<div class="line"><span class="lineno"> 2959</span>            <span class="comment">// offset, whose negativity we want to preserve</span></div>
<div class="line"><span class="lineno"> 2960</span>            <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">offset</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(<span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">typename</a> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::make_signed&lt;index_t&gt;::type</a><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a> - <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">tailBase</a>) / <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">typename</a> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::make_signed&lt;index_t&gt;::type</a><span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">BLOCK_SIZE</a>));</div>
<div class="line"><span class="lineno"> 2961</span>            <span class="keywordtype">size_t</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">idx</a> = (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">tail</a> + <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">offset</a>) &amp; (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>-&gt;capacity - 1);</div>
<div class="line"><span class="lineno"> 2962</span>            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">assert</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>-&gt;index[<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">idx</a>]-&gt;key.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>) == <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a> &amp;&amp; <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>-&gt;index[<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">idx</a>]-&gt;value.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>) != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno"> 2963</span>            <span class="keywordflow">return</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">idx</a>;</div>
<div class="line"><span class="lineno"> 2964</span>        }</div>
<div class="ttc" id="astructmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_html_ad6584eb1791fa6e8f21895c5cff378c9"><div class="ttname"><a href="#ad6584eb1791fa6e8f21895c5cff378c9">moodycamel::ConcurrentQueue::ImplicitProducer::INVALID_BLOCK_BASE</a></div><div class="ttdeci">static const index_t INVALID_BLOCK_BASE</div><div class="ttdef"><b>Definition</b> <a href="concurrentqueue_8h_source.html#l02883">concurrentqueue.h:2883</a></div></div>
</div><!-- fragment --><div class="dynheader">
被呼び出し関係図:</div>
<div class="dyncontent">
<div class="center"><!-- SVG 10 --></div>
</div>

</div>
</div>
<a id="aa6d3e5e6b4316468ae9516dddddcb1bc" name="aa6d3e5e6b4316468ae9516dddddcb1bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6d3e5e6b4316468ae9516dddddcb1bc">&#9670;&#160;</a></span>insert_block_index_entry()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, typename Traits = ConcurrentQueueDefaultTraits&gt; </div>
<div class="memtemplate">
template&lt;<a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ad59a292a76c2276b4d1c2b1bcd5904a9">AllocationMode</a> allocMode&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classmoodycamel_1_1_concurrent_queue.html">moodycamel::ConcurrentQueue</a>&lt; T, Traits &gt;::ImplicitProducer::insert_block_index_entry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_entry.html">BlockIndexEntry</a> *&amp;</td>          <td class="paramname"><span class="paramname"><em>idxEntry</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ad68d536c896de4e839dd95225e7deea3">index_t</a></td>          <td class="paramname"><span class="paramname"><em>blockStartIndex</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition"> <a class="el" href="concurrentqueue_8h_source.html">concurrentqueue.h</a> の <a class="el" href="concurrentqueue_8h_source.html#l02901">2901</a> 行目に定義があります。</p>
<div class="fragment"><div class="line"><span class="lineno"> 2902</span>        {</div>
<div class="line"><span class="lineno"> 2903</span>            <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a> = <a class="code hl_variable" href="#aff4b09564ee422ffb81feb29254d288a">blockIndex</a>.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);        <span class="comment">// We&#39;re the only writer thread, relaxed is OK</span></div>
<div class="line"><span class="lineno"> 2904</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 2905</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// this can happen if new_block_index failed in the constructor</span></div>
<div class="line"><span class="lineno"> 2906</span>            }</div>
<div class="line"><span class="lineno"> 2907</span>            <span class="keywordtype">size_t</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newTail</a> = (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>-&gt;tail.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>) + 1) &amp; (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>-&gt;capacity - 1);</div>
<div class="line"><span class="lineno"> 2908</span>            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">idxEntry</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>-&gt;index[<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newTail</a>];</div>
<div class="line"><span class="lineno"> 2909</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">idxEntry</a>-&gt;key.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>) == <a class="code hl_variable" href="#ad6584eb1791fa6e8f21895c5cff378c9">INVALID_BLOCK_BASE</a> ||</div>
<div class="line"><span class="lineno"> 2910</span>                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">idxEntry</a>-&gt;value.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>) == <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 2911</span>                </div>
<div class="line"><span class="lineno"> 2912</span>                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">idxEntry</a>-&gt;key.store(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">blockStartIndex</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2913</span>                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>-&gt;tail.store(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newTail</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_release</a>);</div>
<div class="line"><span class="lineno"> 2914</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2915</span>            }</div>
<div class="line"><span class="lineno"> 2916</span>            </div>
<div class="line"><span class="lineno"> 2917</span>            <span class="comment">// No room in the old block index, try to allocate another one!</span></div>
<div class="line"><span class="lineno"> 2918</span>            <a class="code hl_define" href="concurrentqueue_8h.html#a957a003c2194ffd8b8747f8ed288509a">MOODYCAMEL_CONSTEXPR_IF</a> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">allocMode</a> == <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">CannotAlloc</a>) {</div>
<div class="line"><span class="lineno"> 2919</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2920</span>            }</div>
<div class="line"><span class="lineno"> 2921</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_function" href="#a6e4830a175aa8a3f160a5a85afe72af4">new_block_index</a>()) {</div>
<div class="line"><span class="lineno"> 2922</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2923</span>            }</div>
<div class="line"><span class="lineno"> 2924</span>            <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2925</span>                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a> = <a class="code hl_variable" href="#aff4b09564ee422ffb81feb29254d288a">blockIndex</a>.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2926</span>                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newTail</a> = (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>-&gt;tail.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>) + 1) &amp; (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>-&gt;capacity - 1);</div>
<div class="line"><span class="lineno"> 2927</span>                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">idxEntry</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>-&gt;index[<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newTail</a>];</div>
<div class="line"><span class="lineno"> 2928</span>                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">assert</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">idxEntry</a>-&gt;key.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>) == <a class="code hl_variable" href="#ad6584eb1791fa6e8f21895c5cff378c9">INVALID_BLOCK_BASE</a>);</div>
<div class="line"><span class="lineno"> 2929</span>                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">idxEntry</a>-&gt;key.store(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">blockStartIndex</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2930</span>                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>-&gt;tail.store(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">newTail</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_release</a>);</div>
<div class="line"><span class="lineno"> 2931</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2932</span>            }</div>
<div class="line"><span class="lineno"> 2933</span>        }</div>
</div><!-- fragment --><div class="dynheader">
呼び出し関係図:</div>
<div class="dyncontent">
<div class="center"><!-- SVG 11 --></div>
</div>
<div class="dynheader">
被呼び出し関係図:</div>
<div class="dyncontent">
<div class="center"><!-- SVG 12 --></div>
</div>

</div>
</div>
<a id="a6e4830a175aa8a3f160a5a85afe72af4" name="a6e4830a175aa8a3f160a5a85afe72af4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e4830a175aa8a3f160a5a85afe72af4">&#9670;&#160;</a></span>new_block_index()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, typename Traits = ConcurrentQueueDefaultTraits&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classmoodycamel_1_1_concurrent_queue.html">moodycamel::ConcurrentQueue</a>&lt; T, Traits &gt;::ImplicitProducer::new_block_index </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition"> <a class="el" href="concurrentqueue_8h_source.html">concurrentqueue.h</a> の <a class="el" href="concurrentqueue_8h_source.html#l02966">2966</a> 行目に定義があります。</p>
<div class="fragment"><div class="line"><span class="lineno"> 2967</span>        {</div>
<div class="line"><span class="lineno"> 2968</span>            <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">prev</a> = <a class="code hl_variable" href="#aff4b09564ee422ffb81feb29254d288a">blockIndex</a>.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2969</span>            <span class="keywordtype">size_t</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">prevCapacity</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">prev</a> == <span class="keyword">nullptr</span> ? 0 : <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">prev</a>-&gt;capacity;</div>
<div class="line"><span class="lineno"> 2970</span>            <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">entryCount</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">prev</a> == <span class="keyword">nullptr</span> ? <a class="code hl_variable" href="#a3fdd755001cff817e7a4ca707db16dc8">nextBlockIndexCapacity</a> : <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">prevCapacity</a>;</div>
<div class="line"><span class="lineno"> 2971</span>            <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">raw</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>((<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">Traits::malloc</a>)(</div>
<div class="line"><span class="lineno"> 2972</span>                <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_header.html">BlockIndexHeader</a>) +</div>
<div class="line"><span class="lineno"> 2973</span>                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::alignment_of&lt;BlockIndexEntry&gt;::value</a> - 1 + <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_entry.html">BlockIndexEntry</a>) * <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">entryCount</a> +</div>
<div class="line"><span class="lineno"> 2974</span>                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::alignment_of&lt;BlockIndexEntry*&gt;::value</a> - 1 + <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_entry.html">BlockIndexEntry</a>*) * <a class="code hl_variable" href="#a3fdd755001cff817e7a4ca707db16dc8">nextBlockIndexCapacity</a>));</div>
<div class="line"><span class="lineno"> 2975</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">raw</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 2976</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2977</span>            }</div>
<div class="line"><span class="lineno"> 2978</span>            </div>
<div class="line"><span class="lineno"> 2979</span>            <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">header</a> = <span class="keyword">new</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">raw</a>) <a class="code hl_struct" href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_header.html">BlockIndexHeader</a>;</div>
<div class="line"><span class="lineno"> 2980</span>            <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">entries</a> = <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_struct" href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_entry.html">BlockIndexEntry</a>*<span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">details::align_for&lt;BlockIndexEntry&gt;</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">raw</a> + <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_header.html">BlockIndexHeader</a>)));</div>
<div class="line"><span class="lineno"> 2981</span>            <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a> = <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_struct" href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_entry.html">BlockIndexEntry</a>**<span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">details::align_for&lt;BlockIndexEntry*&gt;</a>(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">entries</a>) + <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_entry.html">BlockIndexEntry</a>) * <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">entryCount</a>));</div>
<div class="line"><span class="lineno"> 2982</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">prev</a> != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 2983</span>                <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">prevTail</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">prev</a>-&gt;tail.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2984</span>                <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">prevPos</a> = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">prevTail</a>;</div>
<div class="line"><span class="lineno"> 2985</span>                <span class="keywordtype">size_t</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">i</a> = 0;</div>
<div class="line"><span class="lineno"> 2986</span>                <span class="keywordflow">do</span> {</div>
<div class="line"><span class="lineno"> 2987</span>                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">prevPos</a> = (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">prevPos</a> + 1) &amp; (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">prev</a>-&gt;capacity - 1);</div>
<div class="line"><span class="lineno"> 2988</span>                    <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a>[<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">i</a>++] = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">prev</a>-&gt;index[<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">prevPos</a>];</div>
<div class="line"><span class="lineno"> 2989</span>                } <span class="keywordflow">while</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">prevPos</a> != <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">prevTail</a>);</div>
<div class="line"><span class="lineno"> 2990</span>                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">assert</a>(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">i</a> == <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">prevCapacity</a>);</div>
<div class="line"><span class="lineno"> 2991</span>            }</div>
<div class="line"><span class="lineno"> 2992</span>            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">i</a> = 0; <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">i</a> != <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">entryCount</a>; ++<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">i</a>) {</div>
<div class="line"><span class="lineno"> 2993</span>                <span class="keyword">new</span> (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">entries</a> + <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">i</a>) <a class="code hl_struct" href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_entry.html">BlockIndexEntry</a>;</div>
<div class="line"><span class="lineno"> 2994</span>                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">entries</a>[<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">i</a>].key.store(<a class="code hl_variable" href="#ad6584eb1791fa6e8f21895c5cff378c9">INVALID_BLOCK_BASE</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2995</span>                <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a>[<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">prevCapacity</a> + <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">i</a>] = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">entries</a> + <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">i</a>;</div>
<div class="line"><span class="lineno"> 2996</span>            }</div>
<div class="line"><span class="lineno"> 2997</span>            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">header</a>-&gt;prev = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">prev</a>;</div>
<div class="line"><span class="lineno"> 2998</span>            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">header</a>-&gt;entries = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">entries</a>;</div>
<div class="line"><span class="lineno"> 2999</span>            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">header</a>-&gt;index = <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">index</a>;</div>
<div class="line"><span class="lineno"> 3000</span>            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">header</a>-&gt;capacity = <a class="code hl_variable" href="#a3fdd755001cff817e7a4ca707db16dc8">nextBlockIndexCapacity</a>;</div>
<div class="line"><span class="lineno"> 3001</span>            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">header</a>-&gt;tail.store((<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">prevCapacity</a> - 1) &amp; (<a class="code hl_variable" href="#a3fdd755001cff817e7a4ca707db16dc8">nextBlockIndexCapacity</a> - 1), <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 3002</span>            </div>
<div class="line"><span class="lineno"> 3003</span>            <a class="code hl_variable" href="#aff4b09564ee422ffb81feb29254d288a">blockIndex</a>.store(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">header</a>, <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_release</a>);</div>
<div class="line"><span class="lineno"> 3004</span>            </div>
<div class="line"><span class="lineno"> 3005</span>            <a class="code hl_variable" href="#a3fdd755001cff817e7a4ca707db16dc8">nextBlockIndexCapacity</a> &lt;&lt;= 1;</div>
<div class="line"><span class="lineno"> 3006</span>            </div>
<div class="line"><span class="lineno"> 3007</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 3008</span>        }</div>
</div><!-- fragment --><div class="dynheader">
被呼び出し関係図:</div>
<div class="dyncontent">
<div class="center"><!-- SVG 13 --></div>
</div>

</div>
</div>
<a id="ac5e3152c1585fc55870f369953def5d3" name="ac5e3152c1585fc55870f369953def5d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5e3152c1585fc55870f369953def5d3">&#9670;&#160;</a></span>rewind_block_index_tail()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, typename Traits = ConcurrentQueueDefaultTraits&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classmoodycamel_1_1_concurrent_queue.html">moodycamel::ConcurrentQueue</a>&lt; T, Traits &gt;::ImplicitProducer::rewind_block_index_tail </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition"> <a class="el" href="concurrentqueue_8h_source.html">concurrentqueue.h</a> の <a class="el" href="concurrentqueue_8h_source.html#l02935">2935</a> 行目に定義があります。</p>
<div class="fragment"><div class="line"><span class="lineno"> 2936</span>        {</div>
<div class="line"><span class="lineno"> 2937</span>            <span class="keyword">auto</span> <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a> = <a class="code hl_variable" href="#aff4b09564ee422ffb81feb29254d288a">blockIndex</a>.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2938</span>            <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>-&gt;tail.store((<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>-&gt;tail.load(<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>) - 1) &amp; (<a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">localBlockIndex</a>-&gt;capacity - 1), <a class="code hl_class" href="classmoodycamel_1_1_concurrent_queue.html">std::memory_order_relaxed</a>);</div>
<div class="line"><span class="lineno"> 2939</span>        }</div>
</div><!-- fragment --><div class="dynheader">
被呼び出し関係図:</div>
<div class="dyncontent">
<div class="center"><!-- SVG 14 --></div>
</div>

</div>
</div>
<h2 class="groupheader">メンバ詳解</h2>
<a id="aff4b09564ee422ffb81feb29254d288a" name="aff4b09564ee422ffb81feb29254d288a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff4b09564ee422ffb81feb29254d288a">&#9670;&#160;</a></span>blockIndex</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, typename Traits = ConcurrentQueueDefaultTraits&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;<a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer_1_1_block_index_header.html">BlockIndexHeader</a>*&gt; <a class="el" href="classmoodycamel_1_1_concurrent_queue.html">moodycamel::ConcurrentQueue</a>&lt; T, Traits &gt;::ImplicitProducer::blockIndex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition"> <a class="el" href="concurrentqueue_8h_source.html">concurrentqueue.h</a> の <a class="el" href="concurrentqueue_8h_source.html#l03012">3012</a> 行目に定義があります。</p>

</div>
</div>
<a id="ad6584eb1791fa6e8f21895c5cff378c9" name="ad6584eb1791fa6e8f21895c5cff378c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6584eb1791fa6e8f21895c5cff378c9">&#9670;&#160;</a></span>INVALID_BLOCK_BASE</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, typename Traits = ConcurrentQueueDefaultTraits&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ad68d536c896de4e839dd95225e7deea3">index_t</a> <a class="el" href="classmoodycamel_1_1_concurrent_queue.html">moodycamel::ConcurrentQueue</a>&lt; T, Traits &gt;::ImplicitProducer::INVALID_BLOCK_BASE = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition"> <a class="el" href="concurrentqueue_8h_source.html">concurrentqueue.h</a> の <a class="el" href="concurrentqueue_8h_source.html#l02883">2883</a> 行目に定義があります。</p>

</div>
</div>
<a id="a3fdd755001cff817e7a4ca707db16dc8" name="a3fdd755001cff817e7a4ca707db16dc8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fdd755001cff817e7a4ca707db16dc8">&#9670;&#160;</a></span>nextBlockIndexCapacity</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, typename Traits = ConcurrentQueueDefaultTraits&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmoodycamel_1_1_concurrent_queue.html#ac0b73313ed107d313b55c8a77be19b28">size_t</a> <a class="el" href="classmoodycamel_1_1_concurrent_queue.html">moodycamel::ConcurrentQueue</a>&lt; T, Traits &gt;::ImplicitProducer::nextBlockIndexCapacity</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition"> <a class="el" href="concurrentqueue_8h_source.html">concurrentqueue.h</a> の <a class="el" href="concurrentqueue_8h_source.html#l03011">3011</a> 行目に定義があります。</p>

</div>
</div>
<a id="af8a4586c41851ef67092ada99fc9b0ef" name="af8a4586c41851ef67092ada99fc9b0ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8a4586c41851ef67092ada99fc9b0ef">&#9670;&#160;</a></span>threadExitListener</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T, typename Traits = ConcurrentQueueDefaultTraits&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmoodycamel_1_1details_1_1_thread_exit_listener.html">details::ThreadExitListener</a> <a class="el" href="classmoodycamel_1_1_concurrent_queue.html">moodycamel::ConcurrentQueue</a>&lt; T, Traits &gt;::ImplicitProducer::threadExitListener</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"> <a class="el" href="concurrentqueue_8h_source.html">concurrentqueue.h</a> の <a class="el" href="concurrentqueue_8h_source.html#l03016">3016</a> 行目に定義があります。</p>

</div>
</div>
<hr/>この構造体詳解は次のファイルから抽出されました:<ul>
<li>C:/work/GitHub/Sector3X/SectorFW/SectorFW/external/concurrentqueue/<a class="el" href="concurrentqueue_8h_source.html">concurrentqueue.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacemoodycamel.html">moodycamel</a></li><li class="navelem"><a class="el" href="classmoodycamel_1_1_concurrent_queue.html">ConcurrentQueue</a></li><li class="navelem"><a class="el" href="structmoodycamel_1_1_concurrent_queue_1_1_implicit_producer.html">ImplicitProducer</a></li>
    <li class="footer">構築: <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
